<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>MP-Gadget: libgadget/metal_return.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="https://cdn.jsdelivr.net/npm/mathjax@2/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-extra.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">MP-Gadget
   &#160;<span id="projectnumber">5.0.1.dev1-76bc7d4726-dirty</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_8db5bc7a24c620673ff2e44953ca6f6c.html">libgadget</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">metal_return.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &quot;<a class="el" href="forcetree_8h_source.html">forcetree.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="timestep_8h_source.html">timestep.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="paramset_8h_source.html">utils/paramset.h</a>&quot;</code><br />
<code>#include &lt;gsl/gsl_interp2d.h&gt;</code><br />
<code>#include &lt;gsl/gsl_integration.h&gt;</code><br />
<code>#include &quot;<a class="el" href="slotsmanager_8h_source.html">slotsmanager.h</a>&quot;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for metal_return.h:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="metal__return_8h__incl.svg" width="1986" height="635"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div><div class="textblock"><div class="dynheader">
This graph shows which files directly or indirectly include this file:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="metal__return_8h__dep__incl.svg" width="664" height="127"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>
<p><a href="metal__return_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structinterps.html">interps</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structMetalReturnPriv.html">MetalReturnPriv</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a45c1e30e08ea1d55780815948138bdc6"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="metal__return_8h.html#a45c1e30e08ea1d55780815948138bdc6">setup_metal_table_interp</a> (struct <a class="el" href="structinterps.html">interps</a> *<a class="el" href="cooling__uvfluc_8c.html#a7a1e78ce837328347579b1910844b59d">interp</a>)</td></tr>
<tr class="separator:a45c1e30e08ea1d55780815948138bdc6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7c817252ab7c0f679fea71bde6dea852"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="metal__return_8h.html#a7c817252ab7c0f679fea71bde6dea852">metal_return</a> (const <a class="el" href="structActiveParticles.html">ActiveParticles</a> *act, <a class="el" href="structDomainDecomp.html">DomainDecomp</a> *const ddecomp, <a class="el" href="structCosmology.html">Cosmology</a> *<a class="el" href="power_8c.html#aaca257a58f3e957a7db5fc91431eadf5">CP</a>, const double atime, const double AvgGasMass)</td></tr>
<tr class="separator:a7c817252ab7c0f679fea71bde6dea852"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a867fc3e21ae7aa831a63f2f3f5f20f57"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="metal__return_8h.html#a867fc3e21ae7aa831a63f2f3f5f20f57">set_metal_return_params</a> (<a class="el" href="structParameterSet.html">ParameterSet</a> *ps)</td></tr>
<tr class="separator:a867fc3e21ae7aa831a63f2f3f5f20f57"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2bc8aad8a4cd6b54c88ccd4321c6cfda"><td class="memItemLeft" align="right" valign="top">int64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="metal__return_8h.html#a2bc8aad8a4cd6b54c88ccd4321c6cfda">metal_return_init</a> (const <a class="el" href="structActiveParticles.html">ActiveParticles</a> *act, <a class="el" href="structCosmology.html">Cosmology</a> *<a class="el" href="power_8c.html#aaca257a58f3e957a7db5fc91431eadf5">CP</a>, struct <a class="el" href="structMetalReturnPriv.html">MetalReturnPriv</a> *priv, const double atime)</td></tr>
<tr class="separator:a2bc8aad8a4cd6b54c88ccd4321c6cfda"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6bd8ed6c1f34beb2703996ba03572b8a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="metal__return_8h.html#a6bd8ed6c1f34beb2703996ba03572b8a">metal_return_priv_free</a> (struct <a class="el" href="structMetalReturnPriv.html">MetalReturnPriv</a> *priv)</td></tr>
<tr class="separator:a6bd8ed6c1f34beb2703996ba03572b8a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac6208618c0ad5ad55e84bcfb213e7dcb"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="metal__return_8h.html#ac6208618c0ad5ad55e84bcfb213e7dcb">stellar_density</a> (const <a class="el" href="structActiveParticles.html">ActiveParticles</a> *act, <a class="el" href="types_8h.html#af1ada7381a1118c6d51bdbb0b5e72811">MyFloat</a> *StarVolumeSPH, <a class="el" href="types_8h.html#af1ada7381a1118c6d51bdbb0b5e72811">MyFloat</a> *MassReturn, const <a class="el" href="structForceTree.html">ForceTree</a> *const tree)</td></tr>
<tr class="separator:ac6208618c0ad5ad55e84bcfb213e7dcb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab5c3a1fb77d5aef2936539c084bb0273"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="metal__return_8h.html#ab5c3a1fb77d5aef2936539c084bb0273">metals_haswork</a> (int i, <a class="el" href="types_8h.html#af1ada7381a1118c6d51bdbb0b5e72811">MyFloat</a> *MassReturn)</td></tr>
<tr class="separator:ab5c3a1fb77d5aef2936539c084bb0273"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Function Documentation</h2>
<a id="a7c817252ab7c0f679fea71bde6dea852"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7c817252ab7c0f679fea71bde6dea852">&#9670;&nbsp;</a></span>metal_return()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void metal_return </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structActiveParticles.html">ActiveParticles</a> *&#160;</td>
          <td class="paramname"><em>act</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structDomainDecomp.html">DomainDecomp</a> *const&#160;</td>
          <td class="paramname"><em>ddecomp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structCosmology.html">Cosmology</a> *&#160;</td>
          <td class="paramname"><em>CP</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const double&#160;</td>
          <td class="paramname"><em>atime</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const double&#160;</td>
          <td class="paramname"><em>AvgGasMass</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This function is the driver routine for the calculation of metal return. </p>

<p class="definition">Definition at line <a class="el" href="metal__return_8c_source.html#l00517">517</a> of file <a class="el" href="metal__return_8c_source.html">metal_return.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;{</div>
<div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;    <span class="comment">/* Do nothing if no stars yet*/</span></div>
<div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;    int64_t totstar;</div>
<div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;    MPI_Allreduce(&amp;<a class="code" href="slotsmanager_8c.html#aa317621b6c60bc95c5f3e33c648e8392">SlotsManager</a>-&gt;<a class="code" href="structslots__manager__type.html#a2b662d46902bf6fffca8b3fa2534a4e4">info</a>[4].<a class="code" href="structslot__info.html#aa651c4c7d01687a0b313076c0266465f">size</a>, &amp;totstar, 1, <a class="code" href="system_8h.html#abb95c0be39c73f8e6b0978a9a374d92b">MPI_INT64</a>, MPI_SUM, MPI_COMM_WORLD);</div>
<div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;    <span class="keywordflow">if</span>(totstar == 0)</div>
<div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160; </div>
<div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;    <span class="keyword">struct </span><a class="code" href="structMetalReturnPriv.html">MetalReturnPriv</a> priv[1];</div>
<div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160; </div>
<div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;    int64_t nwork = <a class="code" href="metal__return_8c.html#a2bc8aad8a4cd6b54c88ccd4321c6cfda">metal_return_init</a>(act, <a class="code" href="power_8c.html#aaca257a58f3e957a7db5fc91431eadf5">CP</a>, priv, atime);</div>
<div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160; </div>
<div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;    <span class="comment">/* Maximum mass of a gas particle after enrichment: cap it at a few times the initial mass.</span></div>
<div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;<span class="comment">     * FIXME: Ideally we should here fork a new particle with a smaller gas mass. We should</span></div>
<div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;<span class="comment">     * figure out then how set the gas entropy. A possibly better idea is to add</span></div>
<div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;<span class="comment">     * a generic routine to split gas particles into the density code.*/</span></div>
<div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;    priv-&gt;MaxGasMass = 4* AvgGasMass;</div>
<div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160; </div>
<div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;    int64_t totwork;</div>
<div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;    MPI_Allreduce(&amp;nwork, &amp;totwork, 1, <a class="code" href="system_8h.html#abb95c0be39c73f8e6b0978a9a374d92b">MPI_INT64</a>, MPI_SUM, MPI_COMM_WORLD);</div>
<div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160; </div>
<div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;    <a class="code" href="walltime_8h.html#a2d23071e44d020b4a0b3f2876667d370">walltime_measure</a>(<span class="stringliteral">&quot;/SPH/Metals/Init&quot;</span>);</div>
<div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160; </div>
<div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;    <span class="keywordflow">if</span>(totwork == 0) {</div>
<div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;        <a class="code" href="metal__return_8c.html#a6bd8ed6c1f34beb2703996ba03572b8a">metal_return_priv_free</a>(priv);</div>
<div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;    }</div>
<div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160; </div>
<div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;    <a class="code" href="structForceTree.html">ForceTree</a> gasTree = {0};</div>
<div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;    <span class="comment">/* Just gas, no moments*/</span></div>
<div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;    <a class="code" href="forcetree_8c.html#aa01061828cef34bc4c55ef9eaa7c03f5">force_tree_rebuild_mask</a>(&amp;gasTree, ddecomp, <a class="code" href="forcetree_8h.html#ad7d9abc3063766d4c2825954b8354f70">GASMASK</a>, 0, NULL);</div>
<div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160; </div>
<div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;    <span class="comment">/* Compute total number of weights around each star for actively returning stars*/</span></div>
<div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;    <a class="code" href="metal__return_8c.html#ac6208618c0ad5ad55e84bcfb213e7dcb">stellar_density</a>(act, priv-&gt;StarVolumeSPH, priv-&gt;MassReturn, &amp;gasTree);</div>
<div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160; </div>
<div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;    <span class="comment">/* Do the metal return*/</span></div>
<div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;    <a class="code" href="structTreeWalk.html">TreeWalk</a> tw[1] = {{0}};</div>
<div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160; </div>
<div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;    tw-&gt;<a class="code" href="structTreeWalk.html#aa3ff3d4a5a82422609ac154aa4a461ea">ev_label</a> = <span class="stringliteral">&quot;METALS&quot;</span>;</div>
<div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;    tw-&gt;<a class="code" href="structTreeWalk.html#ab4e96e67f2e72ac33dca9dd06cdac6c0">visit</a> = (<a class="code" href="treewalk_8h.html#a01b18ab132aa3a45e2f2bed8aef94633">TreeWalkVisitFunction</a>) <a class="code" href="treewalk_8c.html#a145aa9608fd3824bec8049ee97da1c6f">treewalk_visit_ngbiter</a>;</div>
<div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;    tw-&gt;<a class="code" href="structTreeWalk.html#a96381f9f61cf2c56dac48927cd997ec3">ngbiter</a> = (<a class="code" href="treewalk_8h.html#aade20e4cc34b64ecf3bd6f5525465371">TreeWalkNgbIterFunction</a>) <a class="code" href="metal__return_8c.html#aed77dd49844be97101b610fcca622033">metal_return_ngbiter</a>;</div>
<div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;    tw-&gt;<a class="code" href="structTreeWalk.html#a36bf2eb0e0d65ace233ef30335e04659">ngbiter_type_elsize</a> = <span class="keyword">sizeof</span>(<a class="code" href="structTreeWalkNgbIterMetals.html">TreeWalkNgbIterMetals</a>);</div>
<div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;    tw-&gt;<a class="code" href="structTreeWalk.html#a2f6bc842f407a44d99de52e9b5140454">haswork</a> = <a class="code" href="metal__return_8c.html#aae2dc62d04b08fb98b6b5e0549d595f9">metal_return_haswork</a>;</div>
<div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;    tw-&gt;<a class="code" href="structTreeWalk.html#ad0b91dafd46de132917e7993869514c5">fill</a> = (<a class="code" href="treewalk_8h.html#ac9a8ade7817c58b83859399364deb1a1">TreeWalkFillQueryFunction</a>) <a class="code" href="metal__return_8c.html#ac75463a2439d1e5657e6b759b79cf717">metal_return_copy</a>;</div>
<div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;    tw-&gt;<a class="code" href="structTreeWalk.html#aa08a0586a68d1f4f87e0caa1e59dcc5e">reduce</a> = NULL;</div>
<div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;    tw-&gt;<a class="code" href="structTreeWalk.html#a8c4dcda60d680c3d56423fca8647472f">postprocess</a> = (<a class="code" href="treewalk_8h.html#a80f59f147efe7c27b601024d819769db">TreeWalkProcessFunction</a>) <a class="code" href="metal__return_8c.html#a64bf0f58fb25b3c2ded7dbeb73088b3c">metal_return_postprocess</a>;</div>
<div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;    tw-&gt;<a class="code" href="structTreeWalk.html#affd5eae4b5a63dcce236ac15b00b4c7c">query_type_elsize</a> = <span class="keyword">sizeof</span>(<a class="code" href="structTreeWalkQueryMetals.html">TreeWalkQueryMetals</a>);</div>
<div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;    tw-&gt;<a class="code" href="structTreeWalk.html#ac8c67faaf2c360ed510c4508f11f7c2d">result_type_elsize</a> = <span class="keyword">sizeof</span>(<a class="code" href="structTreeWalkResultMetals.html">TreeWalkResultMetals</a>);</div>
<div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;    tw-&gt;<a class="code" href="structTreeWalk.html#ab8c7809c8d29e0326dbdde88e8fa5dfb">repeatdisallowed</a> = 1;</div>
<div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;    tw-&gt;<a class="code" href="structTreeWalk.html#a8525705e365e7c07027f372b66aff149">tree</a> = &amp;gasTree;</div>
<div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;    tw-&gt;<a class="code" href="structTreeWalk.html#a2ae51082ebb6332e558024b6a45506b2">priv</a> = priv;</div>
<div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160; </div>
<div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;    priv-&gt;spin = <a class="code" href="spinlocks_8c.html#ad80d4484f90fb93890f42054d0818447">init_spinlocks</a>(<a class="code" href="slotsmanager_8c.html#aa317621b6c60bc95c5f3e33c648e8392">SlotsManager</a>-&gt;<a class="code" href="structslots__manager__type.html#a2b662d46902bf6fffca8b3fa2534a4e4">info</a>[0].<a class="code" href="structslot__info.html#aa651c4c7d01687a0b313076c0266465f">size</a>);</div>
<div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;    <a class="code" href="treewalk_8c.html#a1e336844d7f92d15cd9248c81ecfb453">treewalk_run</a>(tw, act-&gt;<a class="code" href="structActiveParticles.html#a1b0b230f3890d70bae976516719b7d07">ActiveParticle</a>, act-&gt;<a class="code" href="structActiveParticles.html#a847ab898fdabc62a4723c7c3a66038d4">NumActiveParticle</a>);</div>
<div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;    <a class="code" href="spinlocks_8c.html#a4198c8f6839dabbd9351bacd76c463e6">free_spinlocks</a>(priv-&gt;spin);</div>
<div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160; </div>
<div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;    <a class="code" href="forcetree_8c.html#aaa26dfea4b696133a8bc35c5e0c56037">force_tree_free</a>(&amp;gasTree);</div>
<div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;    <a class="code" href="metal__return_8c.html#a6bd8ed6c1f34beb2703996ba03572b8a">metal_return_priv_free</a>(priv);</div>
<div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160; </div>
<div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;    <span class="comment">/* collect some timing information */</span></div>
<div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;    <a class="code" href="walltime_8h.html#a2d23071e44d020b4a0b3f2876667d370">walltime_measure</a>(<span class="stringliteral">&quot;/SPH/Metals/Yield&quot;</span>);</div>
<div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;}</div>
<div class="ttc" id="aforcetree_8c_html_aa01061828cef34bc4c55ef9eaa7c03f5"><div class="ttname"><a href="forcetree_8c.html#aa01061828cef34bc4c55ef9eaa7c03f5">force_tree_rebuild_mask</a></div><div class="ttdeci">void force_tree_rebuild_mask(ForceTree *tree, DomainDecomp *ddecomp, int mask, const int HybridNuGrav, const char *EmergencyOutputDir)</div><div class="ttdef"><b>Definition:</b> <a href="forcetree_8c_source.html#l00161">forcetree.c:161</a></div></div>
<div class="ttc" id="aforcetree_8c_html_aaa26dfea4b696133a8bc35c5e0c56037"><div class="ttname"><a href="forcetree_8c.html#aaa26dfea4b696133a8bc35c5e0c56037">force_tree_free</a></div><div class="ttdeci">void force_tree_free(ForceTree *tree)</div><div class="ttdef"><b>Definition:</b> <a href="forcetree_8c_source.html#l01409">forcetree.c:1409</a></div></div>
<div class="ttc" id="aforcetree_8h_html_ad7d9abc3063766d4c2825954b8354f70"><div class="ttname"><a href="forcetree_8h.html#ad7d9abc3063766d4c2825954b8354f70">GASMASK</a></div><div class="ttdeci">#define GASMASK</div><div class="ttdef"><b>Definition:</b> <a href="forcetree_8h_source.html#l00021">forcetree.h:21</a></div></div>
<div class="ttc" id="ametal__return_8c_html_a2bc8aad8a4cd6b54c88ccd4321c6cfda"><div class="ttname"><a href="metal__return_8c.html#a2bc8aad8a4cd6b54c88ccd4321c6cfda">metal_return_init</a></div><div class="ttdeci">int64_t metal_return_init(const ActiveParticles *act, Cosmology *CP, struct MetalReturnPriv *priv, const double atime)</div><div class="ttdef"><b>Definition:</b> <a href="metal__return_8c_source.html#l00437">metal_return.c:437</a></div></div>
<div class="ttc" id="ametal__return_8c_html_a64bf0f58fb25b3c2ded7dbeb73088b3c"><div class="ttname"><a href="metal__return_8c.html#a64bf0f58fb25b3c2ded7dbeb73088b3c">metal_return_postprocess</a></div><div class="ttdeci">static void metal_return_postprocess(int place, TreeWalk *tw)</div><div class="ttdef"><b>Definition:</b> <a href="metal__return_8c_source.html#l00619">metal_return.c:619</a></div></div>
<div class="ttc" id="ametal__return_8c_html_a6bd8ed6c1f34beb2703996ba03572b8a"><div class="ttname"><a href="metal__return_8c.html#a6bd8ed6c1f34beb2703996ba03572b8a">metal_return_priv_free</a></div><div class="ttdeci">void metal_return_priv_free(struct MetalReturnPriv *priv)</div><div class="ttdef"><b>Definition:</b> <a href="metal__return_8c_source.html#l00500">metal_return.c:500</a></div></div>
<div class="ttc" id="ametal__return_8c_html_aae2dc62d04b08fb98b6b5e0549d595f9"><div class="ttname"><a href="metal__return_8c.html#aae2dc62d04b08fb98b6b5e0549d595f9">metal_return_haswork</a></div><div class="ttdeci">static int metal_return_haswork(int n, TreeWalk *tw)</div><div class="ttdef"><b>Definition:</b> <a href="metal__return_8c_source.html#l00720">metal_return.c:720</a></div></div>
<div class="ttc" id="ametal__return_8c_html_ac6208618c0ad5ad55e84bcfb213e7dcb"><div class="ttname"><a href="metal__return_8c.html#ac6208618c0ad5ad55e84bcfb213e7dcb">stellar_density</a></div><div class="ttdeci">void stellar_density(const ActiveParticles *act, MyFloat *StarVolumeSPH, MyFloat *MassReturn, const ForceTree *const tree)</div><div class="ttdef"><b>Definition:</b> <a href="metal__return_8c_source.html#l00923">metal_return.c:923</a></div></div>
<div class="ttc" id="ametal__return_8c_html_ac75463a2439d1e5657e6b759b79cf717"><div class="ttname"><a href="metal__return_8c.html#ac75463a2439d1e5657e6b759b79cf717">metal_return_copy</a></div><div class="ttdeci">static void metal_return_copy(int place, TreeWalkQueryMetals *input, TreeWalk *tw)</div><div class="ttdef"><b>Definition:</b> <a href="metal__return_8c_source.html#l00583">metal_return.c:583</a></div></div>
<div class="ttc" id="ametal__return_8c_html_aed77dd49844be97101b610fcca622033"><div class="ttname"><a href="metal__return_8c.html#aed77dd49844be97101b610fcca622033">metal_return_ngbiter</a></div><div class="ttdeci">static void metal_return_ngbiter(TreeWalkQueryMetals *I, TreeWalkResultMetals *O, TreeWalkNgbIterMetals *iter, LocalTreeWalk *lv)</div><div class="ttdef"><b>Definition:</b> <a href="metal__return_8c_source.html#l00633">metal_return.c:633</a></div></div>
<div class="ttc" id="apower_8c_html_aaca257a58f3e957a7db5fc91431eadf5"><div class="ttname"><a href="power_8c.html#aaca257a58f3e957a7db5fc91431eadf5">CP</a></div><div class="ttdeci">static Cosmology * CP</div><div class="ttdef"><b>Definition:</b> <a href="power_8c_source.html#l00027">power.c:27</a></div></div>
<div class="ttc" id="aslotsmanager_8c_html_aa317621b6c60bc95c5f3e33c648e8392"><div class="ttname"><a href="slotsmanager_8c.html#aa317621b6c60bc95c5f3e33c648e8392">SlotsManager</a></div><div class="ttdeci">struct slots_manager_type SlotsManager[1]</div><div class="ttdef"><b>Definition:</b> <a href="slotsmanager_8c_source.html#l00001">slotsmanager.c:7</a></div></div>
<div class="ttc" id="aspinlocks_8c_html_a4198c8f6839dabbd9351bacd76c463e6"><div class="ttname"><a href="spinlocks_8c.html#a4198c8f6839dabbd9351bacd76c463e6">free_spinlocks</a></div><div class="ttdeci">void free_spinlocks(struct SpinLocks *spin)</div><div class="ttdef"><b>Definition:</b> <a href="spinlocks_8c_source.html#l00070">spinlocks.c:70</a></div></div>
<div class="ttc" id="aspinlocks_8c_html_ad80d4484f90fb93890f42054d0818447"><div class="ttname"><a href="spinlocks_8c.html#ad80d4484f90fb93890f42054d0818447">init_spinlocks</a></div><div class="ttdeci">struct SpinLocks * init_spinlocks(int NumLock)</div><div class="ttdef"><b>Definition:</b> <a href="spinlocks_8c_source.html#l00049">spinlocks.c:49</a></div></div>
<div class="ttc" id="astructActiveParticles_html_a1b0b230f3890d70bae976516719b7d07"><div class="ttname"><a href="structActiveParticles.html#a1b0b230f3890d70bae976516719b7d07">ActiveParticles::ActiveParticle</a></div><div class="ttdeci">int * ActiveParticle</div><div class="ttdef"><b>Definition:</b> <a href="timestep_8h_source.html#l00013">timestep.h:13</a></div></div>
<div class="ttc" id="astructActiveParticles_html_a847ab898fdabc62a4723c7c3a66038d4"><div class="ttname"><a href="structActiveParticles.html#a847ab898fdabc62a4723c7c3a66038d4">ActiveParticles::NumActiveParticle</a></div><div class="ttdeci">int64_t NumActiveParticle</div><div class="ttdef"><b>Definition:</b> <a href="timestep_8h_source.html#l00012">timestep.h:12</a></div></div>
<div class="ttc" id="astructForceTree_html"><div class="ttname"><a href="structForceTree.html">ForceTree</a></div><div class="ttdef"><b>Definition:</b> <a href="forcetree_8h_source.html#l00076">forcetree.h:76</a></div></div>
<div class="ttc" id="astructMetalReturnPriv_html"><div class="ttname"><a href="structMetalReturnPriv.html">MetalReturnPriv</a></div><div class="ttdef"><b>Definition:</b> <a href="metal__return_8h_source.html#l00026">metal_return.h:26</a></div></div>
<div class="ttc" id="astructTreeWalkNgbIterMetals_html"><div class="ttname"><a href="structTreeWalkNgbIterMetals.html">TreeWalkNgbIterMetals</a></div><div class="ttdef"><b>Definition:</b> <a href="metal__return_8c_source.html#l00120">metal_return.c:120</a></div></div>
<div class="ttc" id="astructTreeWalkQueryMetals_html"><div class="ttname"><a href="structTreeWalkQueryMetals.html">TreeWalkQueryMetals</a></div><div class="ttdef"><b>Definition:</b> <a href="metal__return_8c_source.html#l00101">metal_return.c:101</a></div></div>
<div class="ttc" id="astructTreeWalkResultMetals_html"><div class="ttname"><a href="structTreeWalkResultMetals.html">TreeWalkResultMetals</a></div><div class="ttdef"><b>Definition:</b> <a href="metal__return_8c_source.html#l00113">metal_return.c:113</a></div></div>
<div class="ttc" id="astructTreeWalk_html"><div class="ttname"><a href="structTreeWalk.html">TreeWalk</a></div><div class="ttdef"><b>Definition:</b> <a href="treewalk_8h_source.html#l00084">treewalk.h:84</a></div></div>
<div class="ttc" id="astructTreeWalk_html_a2ae51082ebb6332e558024b6a45506b2"><div class="ttname"><a href="structTreeWalk.html#a2ae51082ebb6332e558024b6a45506b2">TreeWalk::priv</a></div><div class="ttdeci">void * priv</div><div class="ttdef"><b>Definition:</b> <a href="treewalk_8h_source.html#l00085">treewalk.h:85</a></div></div>
<div class="ttc" id="astructTreeWalk_html_a2f6bc842f407a44d99de52e9b5140454"><div class="ttname"><a href="structTreeWalk.html#a2f6bc842f407a44d99de52e9b5140454">TreeWalk::haswork</a></div><div class="ttdeci">TreeWalkHasWorkFunction haswork</div><div class="ttdef"><b>Definition:</b> <a href="treewalk_8h_source.html#l00100">treewalk.h:100</a></div></div>
<div class="ttc" id="astructTreeWalk_html_a36bf2eb0e0d65ace233ef30335e04659"><div class="ttname"><a href="structTreeWalk.html#a36bf2eb0e0d65ace233ef30335e04659">TreeWalk::ngbiter_type_elsize</a></div><div class="ttdeci">size_t ngbiter_type_elsize</div><div class="ttdef"><b>Definition:</b> <a href="treewalk_8h_source.html#l00097">treewalk.h:97</a></div></div>
<div class="ttc" id="astructTreeWalk_html_a8525705e365e7c07027f372b66aff149"><div class="ttname"><a href="structTreeWalk.html#a8525705e365e7c07027f372b66aff149">TreeWalk::tree</a></div><div class="ttdeci">const ForceTree * tree</div><div class="ttdef"><b>Definition:</b> <a href="treewalk_8h_source.html#l00088">treewalk.h:88</a></div></div>
<div class="ttc" id="astructTreeWalk_html_a8c4dcda60d680c3d56423fca8647472f"><div class="ttname"><a href="structTreeWalk.html#a8c4dcda60d680c3d56423fca8647472f">TreeWalk::postprocess</a></div><div class="ttdeci">TreeWalkProcessFunction postprocess</div><div class="ttdef"><b>Definition:</b> <a href="treewalk_8h_source.html#l00104">treewalk.h:104</a></div></div>
<div class="ttc" id="astructTreeWalk_html_a96381f9f61cf2c56dac48927cd997ec3"><div class="ttname"><a href="structTreeWalk.html#a96381f9f61cf2c56dac48927cd997ec3">TreeWalk::ngbiter</a></div><div class="ttdeci">TreeWalkNgbIterFunction ngbiter</div><div class="ttdef"><b>Definition:</b> <a href="treewalk_8h_source.html#l00103">treewalk.h:103</a></div></div>
<div class="ttc" id="astructTreeWalk_html_aa08a0586a68d1f4f87e0caa1e59dcc5e"><div class="ttname"><a href="structTreeWalk.html#aa08a0586a68d1f4f87e0caa1e59dcc5e">TreeWalk::reduce</a></div><div class="ttdeci">TreeWalkReduceResultFunction reduce</div><div class="ttdef"><b>Definition:</b> <a href="treewalk_8h_source.html#l00102">treewalk.h:102</a></div></div>
<div class="ttc" id="astructTreeWalk_html_aa3ff3d4a5a82422609ac154aa4a461ea"><div class="ttname"><a href="structTreeWalk.html#aa3ff3d4a5a82422609ac154aa4a461ea">TreeWalk::ev_label</a></div><div class="ttdeci">const char * ev_label</div><div class="ttdef"><b>Definition:</b> <a href="treewalk_8h_source.html#l00091">treewalk.h:91</a></div></div>
<div class="ttc" id="astructTreeWalk_html_ab4e96e67f2e72ac33dca9dd06cdac6c0"><div class="ttname"><a href="structTreeWalk.html#ab4e96e67f2e72ac33dca9dd06cdac6c0">TreeWalk::visit</a></div><div class="ttdeci">TreeWalkVisitFunction visit</div><div class="ttdef"><b>Definition:</b> <a href="treewalk_8h_source.html#l00099">treewalk.h:99</a></div></div>
<div class="ttc" id="astructTreeWalk_html_ab8c7809c8d29e0326dbdde88e8fa5dfb"><div class="ttname"><a href="structTreeWalk.html#ab8c7809c8d29e0326dbdde88e8fa5dfb">TreeWalk::repeatdisallowed</a></div><div class="ttdeci">int repeatdisallowed</div><div class="ttdef"><b>Definition:</b> <a href="treewalk_8h_source.html#l00117">treewalk.h:117</a></div></div>
<div class="ttc" id="astructTreeWalk_html_ac8c67faaf2c360ed510c4508f11f7c2d"><div class="ttname"><a href="structTreeWalk.html#ac8c67faaf2c360ed510c4508f11f7c2d">TreeWalk::result_type_elsize</a></div><div class="ttdeci">size_t result_type_elsize</div><div class="ttdef"><b>Definition:</b> <a href="treewalk_8h_source.html#l00096">treewalk.h:96</a></div></div>
<div class="ttc" id="astructTreeWalk_html_ad0b91dafd46de132917e7993869514c5"><div class="ttname"><a href="structTreeWalk.html#ad0b91dafd46de132917e7993869514c5">TreeWalk::fill</a></div><div class="ttdeci">TreeWalkFillQueryFunction fill</div><div class="ttdef"><b>Definition:</b> <a href="treewalk_8h_source.html#l00101">treewalk.h:101</a></div></div>
<div class="ttc" id="astructTreeWalk_html_affd5eae4b5a63dcce236ac15b00b4c7c"><div class="ttname"><a href="structTreeWalk.html#affd5eae4b5a63dcce236ac15b00b4c7c">TreeWalk::query_type_elsize</a></div><div class="ttdeci">size_t query_type_elsize</div><div class="ttdef"><b>Definition:</b> <a href="treewalk_8h_source.html#l00095">treewalk.h:95</a></div></div>
<div class="ttc" id="astructslot__info_html_aa651c4c7d01687a0b313076c0266465f"><div class="ttname"><a href="structslot__info.html#aa651c4c7d01687a0b313076c0266465f">slot_info::size</a></div><div class="ttdeci">int64_t size</div><div class="ttdef"><b>Definition:</b> <a href="slotsmanager_8h_source.html#l00012">slotsmanager.h:12</a></div></div>
<div class="ttc" id="astructslots__manager__type_html_a2b662d46902bf6fffca8b3fa2534a4e4"><div class="ttname"><a href="structslots__manager__type.html#a2b662d46902bf6fffca8b3fa2534a4e4">slots_manager_type::info</a></div><div class="ttdeci">struct slot_info info[6]</div><div class="ttdef"><b>Definition:</b> <a href="slotsmanager_8h_source.html#l00108">slotsmanager.h:112</a></div></div>
<div class="ttc" id="asystem_8h_html_abb95c0be39c73f8e6b0978a9a374d92b"><div class="ttname"><a href="system_8h.html#abb95c0be39c73f8e6b0978a9a374d92b">MPI_INT64</a></div><div class="ttdeci">#define MPI_INT64</div><div class="ttdef"><b>Definition:</b> <a href="system_8h_source.html#l00012">system.h:12</a></div></div>
<div class="ttc" id="atreewalk_8c_html_a145aa9608fd3824bec8049ee97da1c6f"><div class="ttname"><a href="treewalk_8c.html#a145aa9608fd3824bec8049ee97da1c6f">treewalk_visit_ngbiter</a></div><div class="ttdeci">int treewalk_visit_ngbiter(TreeWalkQueryBase *I, TreeWalkResultBase *O, LocalTreeWalk *lv)</div><div class="ttdef"><b>Definition:</b> <a href="treewalk_8c_source.html#l00924">treewalk.c:924</a></div></div>
<div class="ttc" id="atreewalk_8c_html_a1e336844d7f92d15cd9248c81ecfb453"><div class="ttname"><a href="treewalk_8c.html#a1e336844d7f92d15cd9248c81ecfb453">treewalk_run</a></div><div class="ttdeci">void treewalk_run(TreeWalk *tw, int *active_set, size_t size)</div><div class="ttdef"><b>Definition:</b> <a href="treewalk_8c_source.html#l00619">treewalk.c:619</a></div></div>
<div class="ttc" id="atreewalk_8h_html_a01b18ab132aa3a45e2f2bed8aef94633"><div class="ttname"><a href="treewalk_8h.html#a01b18ab132aa3a45e2f2bed8aef94633">TreeWalkVisitFunction</a></div><div class="ttdeci">int(* TreeWalkVisitFunction)(TreeWalkQueryBase *input, TreeWalkResultBase *output, LocalTreeWalk *lv)</div><div class="ttdef"><b>Definition:</b> <a href="treewalk_8h_source.html#l00068">treewalk.h:68</a></div></div>
<div class="ttc" id="atreewalk_8h_html_a80f59f147efe7c27b601024d819769db"><div class="ttname"><a href="treewalk_8h.html#a80f59f147efe7c27b601024d819769db">TreeWalkProcessFunction</a></div><div class="ttdeci">void(* TreeWalkProcessFunction)(const int i, TreeWalk *tw)</div><div class="ttdef"><b>Definition:</b> <a href="treewalk_8h_source.html#l00073">treewalk.h:73</a></div></div>
<div class="ttc" id="atreewalk_8h_html_aade20e4cc34b64ecf3bd6f5525465371"><div class="ttname"><a href="treewalk_8h.html#aade20e4cc34b64ecf3bd6f5525465371">TreeWalkNgbIterFunction</a></div><div class="ttdeci">void(* TreeWalkNgbIterFunction)(TreeWalkQueryBase *input, TreeWalkResultBase *output, TreeWalkNgbIterBase *iter, LocalTreeWalk *lv)</div><div class="ttdef"><b>Definition:</b> <a href="treewalk_8h_source.html#l00070">treewalk.h:70</a></div></div>
<div class="ttc" id="atreewalk_8h_html_ac9a8ade7817c58b83859399364deb1a1"><div class="ttname"><a href="treewalk_8h.html#ac9a8ade7817c58b83859399364deb1a1">TreeWalkFillQueryFunction</a></div><div class="ttdeci">void(* TreeWalkFillQueryFunction)(const int j, TreeWalkQueryBase *query, TreeWalk *tw)</div><div class="ttdef"><b>Definition:</b> <a href="treewalk_8h_source.html#l00075">treewalk.h:75</a></div></div>
<div class="ttc" id="awalltime_8h_html_a2d23071e44d020b4a0b3f2876667d370"><div class="ttname"><a href="walltime_8h.html#a2d23071e44d020b4a0b3f2876667d370">walltime_measure</a></div><div class="ttdeci">#define walltime_measure(name)</div><div class="ttdef"><b>Definition:</b> <a href="walltime_8h_source.html#l00008">walltime.h:8</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="timestep_8h_source.html#l00013">ActiveParticles::ActiveParticle</a>, <a class="el" href="power_8c_source.html#l00027">CP</a>, <a class="el" href="treewalk_8h_source.html#l00091">TreeWalk::ev_label</a>, <a class="el" href="treewalk_8h_source.html#l00101">TreeWalk::fill</a>, <a class="el" href="forcetree_8c_source.html#l01409">force_tree_free()</a>, <a class="el" href="forcetree_8c_source.html#l00161">force_tree_rebuild_mask()</a>, <a class="el" href="spinlocks_8c_source.html#l00070">free_spinlocks()</a>, <a class="el" href="forcetree_8h_source.html#l00021">GASMASK</a>, <a class="el" href="treewalk_8h_source.html#l00100">TreeWalk::haswork</a>, <a class="el" href="slotsmanager_8h_source.html#l00112">slots_manager_type::info</a>, <a class="el" href="spinlocks_8c_source.html#l00049">init_spinlocks()</a>, <a class="el" href="metal__return_8h_source.html#l00029">MetalReturnPriv::MassReturn</a>, <a class="el" href="metal__return_8h_source.html#l00035">MetalReturnPriv::MaxGasMass</a>, <a class="el" href="metal__return_8c_source.html#l00583">metal_return_copy()</a>, <a class="el" href="metal__return_8c_source.html#l00720">metal_return_haswork()</a>, <a class="el" href="metal__return_8c_source.html#l00437">metal_return_init()</a>, <a class="el" href="metal__return_8c_source.html#l00633">metal_return_ngbiter()</a>, <a class="el" href="metal__return_8c_source.html#l00619">metal_return_postprocess()</a>, <a class="el" href="metal__return_8c_source.html#l00500">metal_return_priv_free()</a>, <a class="el" href="system_8h_source.html#l00012">MPI_INT64</a>, <a class="el" href="treewalk_8h_source.html#l00103">TreeWalk::ngbiter</a>, <a class="el" href="treewalk_8h_source.html#l00097">TreeWalk::ngbiter_type_elsize</a>, <a class="el" href="timestep_8h_source.html#l00012">ActiveParticles::NumActiveParticle</a>, <a class="el" href="treewalk_8h_source.html#l00104">TreeWalk::postprocess</a>, <a class="el" href="treewalk_8h_source.html#l00085">TreeWalk::priv</a>, <a class="el" href="treewalk_8h_source.html#l00095">TreeWalk::query_type_elsize</a>, <a class="el" href="treewalk_8h_source.html#l00102">TreeWalk::reduce</a>, <a class="el" href="treewalk_8h_source.html#l00117">TreeWalk::repeatdisallowed</a>, <a class="el" href="treewalk_8h_source.html#l00096">TreeWalk::result_type_elsize</a>, <a class="el" href="slotsmanager_8h_source.html#l00012">slot_info::size</a>, <a class="el" href="slotsmanager_8c_source.html#l00007">SlotsManager</a>, <a class="el" href="metal__return_8h_source.html#l00039">MetalReturnPriv::spin</a>, <a class="el" href="metal__return_8h_source.html#l00037">MetalReturnPriv::StarVolumeSPH</a>, <a class="el" href="metal__return_8c_source.html#l00923">stellar_density()</a>, <a class="el" href="treewalk_8h_source.html#l00088">TreeWalk::tree</a>, <a class="el" href="treewalk_8c_source.html#l00619">treewalk_run()</a>, <a class="el" href="treewalk_8c_source.html#l00924">treewalk_visit_ngbiter()</a>, <a class="el" href="treewalk_8h_source.html#l00099">TreeWalk::visit</a>, and <a class="el" href="walltime_8h_source.html#l00008">walltime_measure</a>.</p>

<p class="reference">Referenced by <a class="el" href="run_8c_source.html#l00284">run()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="metal__return_8h_a7c817252ab7c0f679fea71bde6dea852_cgraph.svg" width="1180" height="1907"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="metal__return_8h_a7c817252ab7c0f679fea71bde6dea852_icgraph.svg" width="311" height="38"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="a2bc8aad8a4cd6b54c88ccd4321c6cfda"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2bc8aad8a4cd6b54c88ccd4321c6cfda">&#9670;&nbsp;</a></span>metal_return_init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int64_t metal_return_init </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structActiveParticles.html">ActiveParticles</a> *&#160;</td>
          <td class="paramname"><em>act</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structCosmology.html">Cosmology</a> *&#160;</td>
          <td class="paramname"><em>CP</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structMetalReturnPriv.html">MetalReturnPriv</a> *&#160;</td>
          <td class="paramname"><em>priv</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const double&#160;</td>
          <td class="paramname"><em>atime</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="metal__return_8c_source.html#l00437">437</a> of file <a class="el" href="metal__return_8c_source.html">metal_return.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;{</div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;    <span class="keywordtype">int</span> nthread = omp_get_max_threads();</div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;    priv-&gt;<a class="code" href="structMetalReturnPriv.html#a1eed6c8d1077ff30b6e6855984159721">gsl_work</a> = <a class="code" href="mymalloc_8h.html#a52bc2c6ec78b17bb6d42957cbf642f15">ta_malloc</a>(<span class="stringliteral">&quot;gsl_work&quot;</span>, gsl_integration_workspace *, nthread);</div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;    <span class="keywordtype">int</span> i;</div>
<div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;    <span class="comment">/* Allocate a workspace for each thread*/</span></div>
<div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;    <span class="keywordflow">for</span>(i=0; i &lt; nthread; i++)</div>
<div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;        priv-&gt;<a class="code" href="structMetalReturnPriv.html#a1eed6c8d1077ff30b6e6855984159721">gsl_work</a>[i] = gsl_integration_workspace_alloc(<a class="code" href="metal__tables_8h.html#a80e75542e47c3d4bb53f7c18ecfbf446">GSL_WORKSPACE</a>);</div>
<div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;    priv-&gt;<a class="code" href="structMetalReturnPriv.html#aff9a4d9cba76d657d12ef9e15e463979">hub</a> = <a class="code" href="power_8c.html#aaca257a58f3e957a7db5fc91431eadf5">CP</a>-&gt;<a class="code" href="structCosmology.html#a4b79dcaa1e1c38d07258c3f539e2cb20">HubbleParam</a>;</div>
<div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160; </div>
<div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;    <span class="comment">/* Initialize*/</span></div>
<div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;    <a class="code" href="metal__return_8c.html#a45c1e30e08ea1d55780815948138bdc6">setup_metal_table_interp</a>(&amp;priv-&gt;<a class="code" href="structMetalReturnPriv.html#ae3d5c753efbff8ad3bb8d344315b36d8">interp</a>);</div>
<div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;    priv-&gt;<a class="code" href="structMetalReturnPriv.html#a4fc18b3395fd0b8c6c0c7a18ebbdf9c4">StellarAges</a> = (<a class="code" href="types_8h.html#af1ada7381a1118c6d51bdbb0b5e72811">MyFloat</a> *) <a class="code" href="mymalloc_8h.html#a3eb707b32b6ac69f2df085e4bc098cc4">mymalloc</a>(<span class="stringliteral">&quot;StellarAges&quot;</span>, <a class="code" href="slotsmanager_8c.html#aa317621b6c60bc95c5f3e33c648e8392">SlotsManager</a>-&gt;<a class="code" href="structslots__manager__type.html#a2b662d46902bf6fffca8b3fa2534a4e4">info</a>[4].<a class="code" href="structslot__info.html#aa651c4c7d01687a0b313076c0266465f">size</a> * <span class="keyword">sizeof</span>(<a class="code" href="types_8h.html#af1ada7381a1118c6d51bdbb0b5e72811">MyFloat</a>));</div>
<div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;    priv-&gt;<a class="code" href="structMetalReturnPriv.html#af3232cc5f66e274ab87edc401e1cac20">MassReturn</a> = (<a class="code" href="types_8h.html#af1ada7381a1118c6d51bdbb0b5e72811">MyFloat</a> *) <a class="code" href="mymalloc_8h.html#a3eb707b32b6ac69f2df085e4bc098cc4">mymalloc</a>(<span class="stringliteral">&quot;MassReturn&quot;</span>, <a class="code" href="slotsmanager_8c.html#aa317621b6c60bc95c5f3e33c648e8392">SlotsManager</a>-&gt;<a class="code" href="structslots__manager__type.html#a2b662d46902bf6fffca8b3fa2534a4e4">info</a>[4].<a class="code" href="structslot__info.html#aa651c4c7d01687a0b313076c0266465f">size</a> * <span class="keyword">sizeof</span>(<a class="code" href="types_8h.html#af1ada7381a1118c6d51bdbb0b5e72811">MyFloat</a>));</div>
<div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;    priv-&gt;<a class="code" href="structMetalReturnPriv.html#afbeb5062024e1f55af3c675c2feb6c78">LowDyingMass</a> = (<a class="code" href="types_8h.html#af1ada7381a1118c6d51bdbb0b5e72811">MyFloat</a> *) <a class="code" href="mymalloc_8h.html#a3eb707b32b6ac69f2df085e4bc098cc4">mymalloc</a>(<span class="stringliteral">&quot;LowDyingMass&quot;</span>, <a class="code" href="slotsmanager_8c.html#aa317621b6c60bc95c5f3e33c648e8392">SlotsManager</a>-&gt;<a class="code" href="structslots__manager__type.html#a2b662d46902bf6fffca8b3fa2534a4e4">info</a>[4].<a class="code" href="structslot__info.html#aa651c4c7d01687a0b313076c0266465f">size</a> * <span class="keyword">sizeof</span>(<a class="code" href="types_8h.html#af1ada7381a1118c6d51bdbb0b5e72811">MyFloat</a>));</div>
<div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;    priv-&gt;<a class="code" href="structMetalReturnPriv.html#a31658498bcfbc005e067dd1d7e3efc87">HighDyingMass</a> = (<a class="code" href="types_8h.html#af1ada7381a1118c6d51bdbb0b5e72811">MyFloat</a> *) <a class="code" href="mymalloc_8h.html#a3eb707b32b6ac69f2df085e4bc098cc4">mymalloc</a>(<span class="stringliteral">&quot;HighDyingMass&quot;</span>, <a class="code" href="slotsmanager_8c.html#aa317621b6c60bc95c5f3e33c648e8392">SlotsManager</a>-&gt;<a class="code" href="structslots__manager__type.html#a2b662d46902bf6fffca8b3fa2534a4e4">info</a>[4].<a class="code" href="structslot__info.html#aa651c4c7d01687a0b313076c0266465f">size</a> * <span class="keyword">sizeof</span>(<a class="code" href="types_8h.html#af1ada7381a1118c6d51bdbb0b5e72811">MyFloat</a>));</div>
<div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;    priv-&gt;<a class="code" href="structMetalReturnPriv.html#a29789d7f689208055997dd8e0189704b">StarVolumeSPH</a> = (<a class="code" href="types_8h.html#af1ada7381a1118c6d51bdbb0b5e72811">MyFloat</a> *) <a class="code" href="mymalloc_8h.html#a3eb707b32b6ac69f2df085e4bc098cc4">mymalloc</a>(<span class="stringliteral">&quot;StarVolumeSPH&quot;</span>, <a class="code" href="slotsmanager_8c.html#aa317621b6c60bc95c5f3e33c648e8392">SlotsManager</a>-&gt;<a class="code" href="structslots__manager__type.html#a2b662d46902bf6fffca8b3fa2534a4e4">info</a>[4].<a class="code" href="structslot__info.html#aa651c4c7d01687a0b313076c0266465f">size</a> * <span class="keyword">sizeof</span>(<a class="code" href="types_8h.html#af1ada7381a1118c6d51bdbb0b5e72811">MyFloat</a>));</div>
<div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160; </div>
<div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;    priv-&gt;<a class="code" href="structMetalReturnPriv.html#a82b1ced3037c6edbc251d8606638e0a3">imf_norm</a> = <a class="code" href="metal__return_8c.html#ad2254b657bd9575bdc88bd5dd246ddd8">compute_imf_norm</a>(priv-&gt;<a class="code" href="structMetalReturnPriv.html#a1eed6c8d1077ff30b6e6855984159721">gsl_work</a>[0]);</div>
<div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;    <span class="comment">/* Maximum possible mass return for below*/</span></div>
<div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;    <span class="keywordtype">double</span> maxmassfrac = <a class="code" href="metal__return_8c.html#a11ab16103547beec8342415acd5add34">mass_yield</a>(0, 1/(<a class="code" href="power_8c.html#aaca257a58f3e957a7db5fc91431eadf5">CP</a>-&gt;<a class="code" href="structCosmology.html#a4b79dcaa1e1c38d07258c3f539e2cb20">HubbleParam</a>*<a class="code" href="physconst_8h.html#a5de72d8762faf787d06d4dd47daeddeb">HUBBLE</a> * <a class="code" href="physconst_8h.html#af2bfce8e844bbb3b120263471c6c329e">SEC_PER_MEGAYEAR</a>), <a class="code" href="metal__tables_8h.html#a61be6fb4a1f463c29c9c1f436ac02ae6">snii_metallicities</a>[<a class="code" href="metal__tables_8h.html#ab4b5721a1b3263ad6360bf5b874f7102">SNII_NMET</a>-1], <a class="code" href="power_8c.html#aaca257a58f3e957a7db5fc91431eadf5">CP</a>-&gt;<a class="code" href="structCosmology.html#a4b79dcaa1e1c38d07258c3f539e2cb20">HubbleParam</a>, &amp;priv-&gt;<a class="code" href="structMetalReturnPriv.html#ae3d5c753efbff8ad3bb8d344315b36d8">interp</a>, priv-&gt;<a class="code" href="structMetalReturnPriv.html#a82b1ced3037c6edbc251d8606638e0a3">imf_norm</a>, priv-&gt;<a class="code" href="structMetalReturnPriv.html#a1eed6c8d1077ff30b6e6855984159721">gsl_work</a>[0],<a class="code" href="metal__tables_8h.html#a75fab227eb2c54a8c6a0dc8646b20586">agb_masses</a>[0], <a class="code" href="metal__tables_8h.html#ac62ec9985d76dc0b4dc569839bc926ef">MAXMASS</a>);</div>
<div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160; </div>
<div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;    int64_t haswork = 0;</div>
<div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;    <span class="comment">/* First find the mass return as a fraction of the total mass and the age of the star.</span></div>
<div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;<span class="comment">     * This is done first so we can skip density computation for not active stars*/</span></div>
<div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;<span class="preprocessor">    #pragma omp parallel for reduction(+: haswork)</span></div>
<div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;    <span class="keywordflow">for</span>(i=0; i &lt; act-&gt;<a class="code" href="structActiveParticles.html#a847ab898fdabc62a4723c7c3a66038d4">NumActiveParticle</a>;i++)</div>
<div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;    {</div>
<div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;        <span class="keywordtype">int</span> p_i = act-&gt;<a class="code" href="structActiveParticles.html#a1b0b230f3890d70bae976516719b7d07">ActiveParticle</a> ? act-&gt;<a class="code" href="structActiveParticles.html#a1b0b230f3890d70bae976516719b7d07">ActiveParticle</a>[i] : i;</div>
<div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;        <span class="keywordflow">if</span>(<a class="code" href="partmanager_8h.html#a2748566f4c443ee77aa831e63dbb5ebe">P</a>[p_i].Type != 4)</div>
<div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;            <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;        <span class="keywordtype">int</span> tid = omp_get_thread_num();</div>
<div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">int</span> slot = <a class="code" href="partmanager_8h.html#a2748566f4c443ee77aa831e63dbb5ebe">P</a>[p_i].PI;</div>
<div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;        priv-&gt;<a class="code" href="structMetalReturnPriv.html#a4fc18b3395fd0b8c6c0c7a18ebbdf9c4">StellarAges</a>[slot] = <a class="code" href="metal__return_8c.html#ae51821f5a1163d9e641d2f59eea9a0de">atime_to_myr</a>(<a class="code" href="power_8c.html#aaca257a58f3e957a7db5fc91431eadf5">CP</a>, <a class="code" href="slotsmanager_8h.html#a9dd255c01b21dd0eff9b32811421bfc8">STARP</a>(p_i).FormationTime, atime, priv-&gt;<a class="code" href="structMetalReturnPriv.html#a1eed6c8d1077ff30b6e6855984159721">gsl_work</a>[tid]);</div>
<div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;        <span class="comment">/* Note this takes care of units*/</span></div>
<div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;        <span class="keywordtype">double</span> initialmass = <a class="code" href="partmanager_8h.html#a2748566f4c443ee77aa831e63dbb5ebe">P</a>[p_i].Mass + <a class="code" href="slotsmanager_8h.html#a9dd255c01b21dd0eff9b32811421bfc8">STARP</a>(p_i).TotalMassReturned;</div>
<div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;        <a class="code" href="metal__return_8c.html#a137b224aee42a66c68cde0385dfb58d0">find_mass_bin_limits</a>(&amp;priv-&gt;<a class="code" href="structMetalReturnPriv.html#afbeb5062024e1f55af3c675c2feb6c78">LowDyingMass</a>[slot], &amp;priv-&gt;<a class="code" href="structMetalReturnPriv.html#a31658498bcfbc005e067dd1d7e3efc87">HighDyingMass</a>[slot], <a class="code" href="slotsmanager_8h.html#a9dd255c01b21dd0eff9b32811421bfc8">STARP</a>(p_i).LastEnrichmentMyr, priv-&gt;<a class="code" href="structMetalReturnPriv.html#a4fc18b3395fd0b8c6c0c7a18ebbdf9c4">StellarAges</a>[<a class="code" href="partmanager_8h.html#a2748566f4c443ee77aa831e63dbb5ebe">P</a>[p_i].PI], <a class="code" href="slotsmanager_8h.html#a9dd255c01b21dd0eff9b32811421bfc8">STARP</a>(p_i).Metallicity, priv-&gt;<a class="code" href="structMetalReturnPriv.html#ae3d5c753efbff8ad3bb8d344315b36d8">interp</a>.<a class="code" href="structinterps.html#ae60754dbad58a2b88fdb0db52dab97d0">lifetime_interp</a>);</div>
<div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160; </div>
<div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;        priv-&gt;<a class="code" href="structMetalReturnPriv.html#af3232cc5f66e274ab87edc401e1cac20">MassReturn</a>[slot] = initialmass * <a class="code" href="metal__return_8c.html#a11ab16103547beec8342415acd5add34">mass_yield</a>(<a class="code" href="slotsmanager_8h.html#a9dd255c01b21dd0eff9b32811421bfc8">STARP</a>(p_i).LastEnrichmentMyr, priv-&gt;<a class="code" href="structMetalReturnPriv.html#a4fc18b3395fd0b8c6c0c7a18ebbdf9c4">StellarAges</a>[<a class="code" href="partmanager_8h.html#a2748566f4c443ee77aa831e63dbb5ebe">P</a>[p_i].PI], <a class="code" href="slotsmanager_8h.html#a9dd255c01b21dd0eff9b32811421bfc8">STARP</a>(p_i).Metallicity, <a class="code" href="power_8c.html#aaca257a58f3e957a7db5fc91431eadf5">CP</a>-&gt;<a class="code" href="structCosmology.html#a4b79dcaa1e1c38d07258c3f539e2cb20">HubbleParam</a>, &amp;priv-&gt;<a class="code" href="structMetalReturnPriv.html#ae3d5c753efbff8ad3bb8d344315b36d8">interp</a>, priv-&gt;<a class="code" href="structMetalReturnPriv.html#a82b1ced3037c6edbc251d8606638e0a3">imf_norm</a>, priv-&gt;<a class="code" href="structMetalReturnPriv.html#a1eed6c8d1077ff30b6e6855984159721">gsl_work</a>[tid],priv-&gt;<a class="code" href="structMetalReturnPriv.html#afbeb5062024e1f55af3c675c2feb6c78">LowDyingMass</a>[slot], priv-&gt;<a class="code" href="structMetalReturnPriv.html#a31658498bcfbc005e067dd1d7e3efc87">HighDyingMass</a>[slot]);</div>
<div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;        <span class="comment">//message(3, &quot;Particle %d PI %d massgen %g mass %g initmass %g\n&quot;, p_i, P[p_i].PI, priv-&gt;MassReturn[P[p_i].PI], P[p_i].Mass, initialmass);</span></div>
<div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;        <span class="comment">/* Guard against making a zero mass particle and warn since this should not happen.*/</span></div>
<div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;        <span class="keywordflow">if</span>(<a class="code" href="slotsmanager_8h.html#a9dd255c01b21dd0eff9b32811421bfc8">STARP</a>(p_i).TotalMassReturned + priv-&gt;<a class="code" href="structMetalReturnPriv.html#af3232cc5f66e274ab87edc401e1cac20">MassReturn</a>[slot] &gt; initialmass * maxmassfrac) {</div>
<div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;            <span class="keywordflow">if</span>(priv-&gt;<a class="code" href="structMetalReturnPriv.html#af3232cc5f66e274ab87edc401e1cac20">MassReturn</a>[slot] / <a class="code" href="slotsmanager_8h.html#a9dd255c01b21dd0eff9b32811421bfc8">STARP</a>(p_i).TotalMassReturned &gt; 0.01)</div>
<div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;                <a class="code" href="endrun_8c.html#a6567cd867c5549fb6586e19ccd819764">message</a>(1, <span class="stringliteral">&quot;Large mass return id %ld %g from %d mass %g initial %g (maxfrac %g) age %g lastenrich %g metal %g dymass %g %g\n&quot;</span>,</div>
<div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;                    <a class="code" href="partmanager_8h.html#a2748566f4c443ee77aa831e63dbb5ebe">P</a>[p_i].ID, priv-&gt;<a class="code" href="structMetalReturnPriv.html#af3232cc5f66e274ab87edc401e1cac20">MassReturn</a>[slot], p_i, <a class="code" href="slotsmanager_8h.html#a9dd255c01b21dd0eff9b32811421bfc8">STARP</a>(p_i).TotalMassReturned, initialmass, maxmassfrac, priv-&gt;<a class="code" href="structMetalReturnPriv.html#a4fc18b3395fd0b8c6c0c7a18ebbdf9c4">StellarAges</a>[<a class="code" href="partmanager_8h.html#a2748566f4c443ee77aa831e63dbb5ebe">P</a>[p_i].PI], <a class="code" href="slotsmanager_8h.html#a9dd255c01b21dd0eff9b32811421bfc8">STARP</a>(p_i).LastEnrichmentMyr, <a class="code" href="slotsmanager_8h.html#a9dd255c01b21dd0eff9b32811421bfc8">STARP</a>(p_i).Metallicity, priv-&gt;<a class="code" href="structMetalReturnPriv.html#afbeb5062024e1f55af3c675c2feb6c78">LowDyingMass</a>[slot], priv-&gt;<a class="code" href="structMetalReturnPriv.html#a31658498bcfbc005e067dd1d7e3efc87">HighDyingMass</a>[slot]);</div>
<div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;            priv-&gt;<a class="code" href="structMetalReturnPriv.html#af3232cc5f66e274ab87edc401e1cac20">MassReturn</a>[slot] = initialmass * maxmassfrac - <a class="code" href="slotsmanager_8h.html#a9dd255c01b21dd0eff9b32811421bfc8">STARP</a>(p_i).TotalMassReturned;</div>
<div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;            <span class="keywordflow">if</span>(priv-&gt;<a class="code" href="structMetalReturnPriv.html#af3232cc5f66e274ab87edc401e1cac20">MassReturn</a>[slot] &lt; 0) {</div>
<div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;                priv-&gt;<a class="code" href="structMetalReturnPriv.html#af3232cc5f66e274ab87edc401e1cac20">MassReturn</a>[slot] = 0;</div>
<div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;            }</div>
<div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;            <span class="comment">/* Ensure that we skip this step*/</span></div>
<div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;            <span class="keywordflow">if</span>(!<a class="code" href="metal__return_8c.html#ab5c3a1fb77d5aef2936539c084bb0273">metals_haswork</a>(p_i, priv-&gt;<a class="code" href="structMetalReturnPriv.html#af3232cc5f66e274ab87edc401e1cac20">MassReturn</a>))</div>
<div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;                <a class="code" href="slotsmanager_8h.html#a9dd255c01b21dd0eff9b32811421bfc8">STARP</a>(p_i).LastEnrichmentMyr = priv-&gt;<a class="code" href="structMetalReturnPriv.html#a4fc18b3395fd0b8c6c0c7a18ebbdf9c4">StellarAges</a>[<a class="code" href="partmanager_8h.html#a2748566f4c443ee77aa831e63dbb5ebe">P</a>[p_i].PI];</div>
<div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160; </div>
<div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;        }</div>
<div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;        <span class="comment">/* Keep count of how much work we need to do*/</span></div>
<div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;        <span class="keywordflow">if</span>(<a class="code" href="metal__return_8c.html#ab5c3a1fb77d5aef2936539c084bb0273">metals_haswork</a>(p_i, priv-&gt;<a class="code" href="structMetalReturnPriv.html#af3232cc5f66e274ab87edc401e1cac20">MassReturn</a>))</div>
<div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;            haswork++;</div>
<div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;    }</div>
<div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;    <span class="keywordflow">return</span> haswork;</div>
<div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;}</div>
<div class="ttc" id="aendrun_8c_html_a6567cd867c5549fb6586e19ccd819764"><div class="ttname"><a href="endrun_8c.html#a6567cd867c5549fb6586e19ccd819764">message</a></div><div class="ttdeci">void message(int where, const char *fmt,...)</div><div class="ttdef"><b>Definition:</b> <a href="endrun_8c_source.html#l00175">endrun.c:175</a></div></div>
<div class="ttc" id="ametal__return_8c_html_a11ab16103547beec8342415acd5add34"><div class="ttname"><a href="metal__return_8c.html#a11ab16103547beec8342415acd5add34">mass_yield</a></div><div class="ttdeci">static double mass_yield(double dtmyrstart, double dtmyrend, double stellarmetal, double hub, struct interps *interp, double imf_norm, gsl_integration_workspace *gsl_work, double masslow, double masshigh)</div><div class="ttdef"><b>Definition:</b> <a href="metal__return_8c_source.html#l00395">metal_return.c:395</a></div></div>
<div class="ttc" id="ametal__return_8c_html_a137b224aee42a66c68cde0385dfb58d0"><div class="ttname"><a href="metal__return_8c.html#a137b224aee42a66c68cde0385dfb58d0">find_mass_bin_limits</a></div><div class="ttdeci">void find_mass_bin_limits(double *masslow, double *masshigh, const double dtstart, const double dtend, double stellarmetal, gsl_interp2d *lifetime_tables)</div><div class="ttdef"><b>Definition:</b> <a href="metal__return_8c_source.html#l00230">metal_return.c:230</a></div></div>
<div class="ttc" id="ametal__return_8c_html_a45c1e30e08ea1d55780815948138bdc6"><div class="ttname"><a href="metal__return_8c.html#a45c1e30e08ea1d55780815948138bdc6">setup_metal_table_interp</a></div><div class="ttdeci">void setup_metal_table_interp(struct interps *interp)</div><div class="ttdef"><b>Definition:</b> <a href="metal__return_8c_source.html#l00076">metal_return.c:76</a></div></div>
<div class="ttc" id="ametal__return_8c_html_ab5c3a1fb77d5aef2936539c084bb0273"><div class="ttname"><a href="metal__return_8c.html#ab5c3a1fb77d5aef2936539c084bb0273">metals_haswork</a></div><div class="ttdeci">int metals_haswork(int i, MyFloat *MassReturn)</div><div class="ttdef"><b>Definition:</b> <a href="metal__return_8c_source.html#l00708">metal_return.c:708</a></div></div>
<div class="ttc" id="ametal__return_8c_html_ad2254b657bd9575bdc88bd5dd246ddd8"><div class="ttname"><a href="metal__return_8c.html#ad2254b657bd9575bdc88bd5dd246ddd8">compute_imf_norm</a></div><div class="ttdeci">double compute_imf_norm(gsl_integration_workspace *gsl_work)</div><div class="ttdef"><b>Definition:</b> <a href="metal__return_8c_source.html#l00314">metal_return.c:314</a></div></div>
<div class="ttc" id="ametal__return_8c_html_ae51821f5a1163d9e641d2f59eea9a0de"><div class="ttname"><a href="metal__return_8c.html#ae51821f5a1163d9e641d2f59eea9a0de">atime_to_myr</a></div><div class="ttdeci">static double atime_to_myr(Cosmology *CP, double atime1, double atime2, gsl_integration_workspace *gsl_work)</div><div class="ttdef"><b>Definition:</b> <a href="metal__return_8c_source.html#l00161">metal_return.c:161</a></div></div>
<div class="ttc" id="ametal__tables_8h_html_a61be6fb4a1f463c29c9c1f436ac02ae6"><div class="ttname"><a href="metal__tables_8h.html#a61be6fb4a1f463c29c9c1f436ac02ae6">snii_metallicities</a></div><div class="ttdeci">static const double snii_metallicities[SNII_NMET]</div><div class="ttdef"><b>Definition:</b> <a href="metal__tables_8h_source.html#l00311">metal_tables.h:311</a></div></div>
<div class="ttc" id="ametal__tables_8h_html_a75fab227eb2c54a8c6a0dc8646b20586"><div class="ttname"><a href="metal__tables_8h.html#a75fab227eb2c54a8c6a0dc8646b20586">agb_masses</a></div><div class="ttdeci">static const double agb_masses[AGB_NMASS]</div><div class="ttdef"><b>Definition:</b> <a href="metal__tables_8h_source.html#l00070">metal_tables.h:70</a></div></div>
<div class="ttc" id="ametal__tables_8h_html_a80e75542e47c3d4bb53f7c18ecfbf446"><div class="ttname"><a href="metal__tables_8h.html#a80e75542e47c3d4bb53f7c18ecfbf446">GSL_WORKSPACE</a></div><div class="ttdeci">#define GSL_WORKSPACE</div><div class="ttdef"><b>Definition:</b> <a href="metal__tables_8h_source.html#l00426">metal_tables.h:426</a></div></div>
<div class="ttc" id="ametal__tables_8h_html_ab4b5721a1b3263ad6360bf5b874f7102"><div class="ttname"><a href="metal__tables_8h.html#ab4b5721a1b3263ad6360bf5b874f7102">SNII_NMET</a></div><div class="ttdeci">#define SNII_NMET</div><div class="ttdef"><b>Definition:</b> <a href="metal__tables_8h_source.html#l00308">metal_tables.h:308</a></div></div>
<div class="ttc" id="ametal__tables_8h_html_ac62ec9985d76dc0b4dc569839bc926ef"><div class="ttname"><a href="metal__tables_8h.html#ac62ec9985d76dc0b4dc569839bc926ef">MAXMASS</a></div><div class="ttdeci">#define MAXMASS</div><div class="ttdef"><b>Definition:</b> <a href="metal__tables_8h_source.html#l00009">metal_tables.h:9</a></div></div>
<div class="ttc" id="amymalloc_8h_html_a3eb707b32b6ac69f2df085e4bc098cc4"><div class="ttname"><a href="mymalloc_8h.html#a3eb707b32b6ac69f2df085e4bc098cc4">mymalloc</a></div><div class="ttdeci">#define mymalloc(name, size)</div><div class="ttdef"><b>Definition:</b> <a href="mymalloc_8h_source.html#l00015">mymalloc.h:15</a></div></div>
<div class="ttc" id="amymalloc_8h_html_a52bc2c6ec78b17bb6d42957cbf642f15"><div class="ttname"><a href="mymalloc_8h.html#a52bc2c6ec78b17bb6d42957cbf642f15">ta_malloc</a></div><div class="ttdeci">#define ta_malloc(name, type, nele)</div><div class="ttdef"><b>Definition:</b> <a href="mymalloc_8h_source.html#l00025">mymalloc.h:25</a></div></div>
<div class="ttc" id="apartmanager_8h_html_a2748566f4c443ee77aa831e63dbb5ebe"><div class="ttname"><a href="partmanager_8h.html#a2748566f4c443ee77aa831e63dbb5ebe">P</a></div><div class="ttdeci">#define P</div><div class="ttdef"><b>Definition:</b> <a href="partmanager_8h_source.html#l00088">partmanager.h:88</a></div></div>
<div class="ttc" id="aphysconst_8h_html_a5de72d8762faf787d06d4dd47daeddeb"><div class="ttname"><a href="physconst_8h.html#a5de72d8762faf787d06d4dd47daeddeb">HUBBLE</a></div><div class="ttdeci">#define HUBBLE</div><div class="ttdef"><b>Definition:</b> <a href="physconst_8h_source.html#l00025">physconst.h:25</a></div></div>
<div class="ttc" id="aphysconst_8h_html_af2bfce8e844bbb3b120263471c6c329e"><div class="ttname"><a href="physconst_8h.html#af2bfce8e844bbb3b120263471c6c329e">SEC_PER_MEGAYEAR</a></div><div class="ttdeci">#define SEC_PER_MEGAYEAR</div><div class="ttdef"><b>Definition:</b> <a href="physconst_8h_source.html#l00031">physconst.h:31</a></div></div>
<div class="ttc" id="aslotsmanager_8h_html_a9dd255c01b21dd0eff9b32811421bfc8"><div class="ttname"><a href="slotsmanager_8h.html#a9dd255c01b21dd0eff9b32811421bfc8">STARP</a></div><div class="ttdeci">#define STARP(i)</div><div class="ttdef"><b>Definition:</b> <a href="slotsmanager_8h_source.html#l00126">slotsmanager.h:126</a></div></div>
<div class="ttc" id="astructCosmology_html_a4b79dcaa1e1c38d07258c3f539e2cb20"><div class="ttname"><a href="structCosmology.html#a4b79dcaa1e1c38d07258c3f539e2cb20">Cosmology::HubbleParam</a></div><div class="ttdeci">double HubbleParam</div><div class="ttdef"><b>Definition:</b> <a href="cosmology_8h_source.html#l00020">cosmology.h:20</a></div></div>
<div class="ttc" id="astructMetalReturnPriv_html_a1eed6c8d1077ff30b6e6855984159721"><div class="ttname"><a href="structMetalReturnPriv.html#a1eed6c8d1077ff30b6e6855984159721">MetalReturnPriv::gsl_work</a></div><div class="ttdeci">gsl_integration_workspace ** gsl_work</div><div class="ttdef"><b>Definition:</b> <a href="metal__return_8h_source.html#l00027">metal_return.h:27</a></div></div>
<div class="ttc" id="astructMetalReturnPriv_html_a29789d7f689208055997dd8e0189704b"><div class="ttname"><a href="structMetalReturnPriv.html#a29789d7f689208055997dd8e0189704b">MetalReturnPriv::StarVolumeSPH</a></div><div class="ttdeci">MyFloat * StarVolumeSPH</div><div class="ttdef"><b>Definition:</b> <a href="metal__return_8h_source.html#l00037">metal_return.h:37</a></div></div>
<div class="ttc" id="astructMetalReturnPriv_html_a31658498bcfbc005e067dd1d7e3efc87"><div class="ttname"><a href="structMetalReturnPriv.html#a31658498bcfbc005e067dd1d7e3efc87">MetalReturnPriv::HighDyingMass</a></div><div class="ttdeci">MyFloat * HighDyingMass</div><div class="ttdef"><b>Definition:</b> <a href="metal__return_8h_source.html#l00031">metal_return.h:31</a></div></div>
<div class="ttc" id="astructMetalReturnPriv_html_a4fc18b3395fd0b8c6c0c7a18ebbdf9c4"><div class="ttname"><a href="structMetalReturnPriv.html#a4fc18b3395fd0b8c6c0c7a18ebbdf9c4">MetalReturnPriv::StellarAges</a></div><div class="ttdeci">MyFloat * StellarAges</div><div class="ttdef"><b>Definition:</b> <a href="metal__return_8h_source.html#l00028">metal_return.h:28</a></div></div>
<div class="ttc" id="astructMetalReturnPriv_html_a82b1ced3037c6edbc251d8606638e0a3"><div class="ttname"><a href="structMetalReturnPriv.html#a82b1ced3037c6edbc251d8606638e0a3">MetalReturnPriv::imf_norm</a></div><div class="ttdeci">double imf_norm</div><div class="ttdef"><b>Definition:</b> <a href="metal__return_8h_source.html#l00032">metal_return.h:32</a></div></div>
<div class="ttc" id="astructMetalReturnPriv_html_ae3d5c753efbff8ad3bb8d344315b36d8"><div class="ttname"><a href="structMetalReturnPriv.html#ae3d5c753efbff8ad3bb8d344315b36d8">MetalReturnPriv::interp</a></div><div class="ttdeci">struct interps interp</div><div class="ttdef"><b>Definition:</b> <a href="metal__return_8h_source.html#l00037">metal_return.h:38</a></div></div>
<div class="ttc" id="astructMetalReturnPriv_html_af3232cc5f66e274ab87edc401e1cac20"><div class="ttname"><a href="structMetalReturnPriv.html#af3232cc5f66e274ab87edc401e1cac20">MetalReturnPriv::MassReturn</a></div><div class="ttdeci">MyFloat * MassReturn</div><div class="ttdef"><b>Definition:</b> <a href="metal__return_8h_source.html#l00029">metal_return.h:29</a></div></div>
<div class="ttc" id="astructMetalReturnPriv_html_afbeb5062024e1f55af3c675c2feb6c78"><div class="ttname"><a href="structMetalReturnPriv.html#afbeb5062024e1f55af3c675c2feb6c78">MetalReturnPriv::LowDyingMass</a></div><div class="ttdeci">MyFloat * LowDyingMass</div><div class="ttdef"><b>Definition:</b> <a href="metal__return_8h_source.html#l00030">metal_return.h:30</a></div></div>
<div class="ttc" id="astructMetalReturnPriv_html_aff9a4d9cba76d657d12ef9e15e463979"><div class="ttname"><a href="structMetalReturnPriv.html#aff9a4d9cba76d657d12ef9e15e463979">MetalReturnPriv::hub</a></div><div class="ttdeci">double hub</div><div class="ttdef"><b>Definition:</b> <a href="metal__return_8h_source.html#l00033">metal_return.h:33</a></div></div>
<div class="ttc" id="astructinterps_html_ae60754dbad58a2b88fdb0db52dab97d0"><div class="ttname"><a href="structinterps.html#ae60754dbad58a2b88fdb0db52dab97d0">interps::lifetime_interp</a></div><div class="ttdeci">gsl_interp2d * lifetime_interp</div><div class="ttdef"><b>Definition:</b> <a href="metal__return_8h_source.html#l00013">metal_return.h:13</a></div></div>
<div class="ttc" id="atypes_8h_html_af1ada7381a1118c6d51bdbb0b5e72811"><div class="ttname"><a href="types_8h.html#af1ada7381a1118c6d51bdbb0b5e72811">MyFloat</a></div><div class="ttdeci">LOW_PRECISION MyFloat</div><div class="ttdef"><b>Definition:</b> <a href="types_8h_source.html#l00019">types.h:19</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="timestep_8h_source.html#l00013">ActiveParticles::ActiveParticle</a>, <a class="el" href="metal__tables_8h_source.html#l00070">agb_masses</a>, <a class="el" href="metal__return_8c_source.html#l00161">atime_to_myr()</a>, <a class="el" href="metal__return_8c_source.html#l00314">compute_imf_norm()</a>, <a class="el" href="power_8c_source.html#l00027">CP</a>, <a class="el" href="metal__return_8c_source.html#l00230">find_mass_bin_limits()</a>, <a class="el" href="metal__return_8h_source.html#l00027">MetalReturnPriv::gsl_work</a>, <a class="el" href="metal__tables_8h_source.html#l00426">GSL_WORKSPACE</a>, <a class="el" href="metal__return_8h_source.html#l00031">MetalReturnPriv::HighDyingMass</a>, <a class="el" href="metal__return_8h_source.html#l00033">MetalReturnPriv::hub</a>, <a class="el" href="physconst_8h_source.html#l00025">HUBBLE</a>, <a class="el" href="cosmology_8h_source.html#l00020">Cosmology::HubbleParam</a>, <a class="el" href="metal__return_8h_source.html#l00032">MetalReturnPriv::imf_norm</a>, <a class="el" href="slotsmanager_8h_source.html#l00112">slots_manager_type::info</a>, <a class="el" href="metal__return_8h_source.html#l00038">MetalReturnPriv::interp</a>, <a class="el" href="metal__return_8h_source.html#l00013">interps::lifetime_interp</a>, <a class="el" href="metal__return_8h_source.html#l00030">MetalReturnPriv::LowDyingMass</a>, <a class="el" href="metal__return_8c_source.html#l00395">mass_yield()</a>, <a class="el" href="metal__return_8h_source.html#l00029">MetalReturnPriv::MassReturn</a>, <a class="el" href="metal__tables_8h_source.html#l00009">MAXMASS</a>, <a class="el" href="endrun_8c_source.html#l00175">message()</a>, <a class="el" href="metal__return_8c_source.html#l00708">metals_haswork()</a>, <a class="el" href="mymalloc_8h_source.html#l00015">mymalloc</a>, <a class="el" href="timestep_8h_source.html#l00012">ActiveParticles::NumActiveParticle</a>, <a class="el" href="partmanager_8h_source.html#l00088">P</a>, <a class="el" href="physconst_8h_source.html#l00031">SEC_PER_MEGAYEAR</a>, <a class="el" href="metal__return_8c_source.html#l00076">setup_metal_table_interp()</a>, <a class="el" href="slotsmanager_8h_source.html#l00012">slot_info::size</a>, <a class="el" href="slotsmanager_8c_source.html#l00007">SlotsManager</a>, <a class="el" href="metal__tables_8h_source.html#l00311">snii_metallicities</a>, <a class="el" href="metal__tables_8h_source.html#l00308">SNII_NMET</a>, <a class="el" href="slotsmanager_8h_source.html#l00126">STARP</a>, <a class="el" href="metal__return_8h_source.html#l00037">MetalReturnPriv::StarVolumeSPH</a>, <a class="el" href="metal__return_8h_source.html#l00028">MetalReturnPriv::StellarAges</a>, and <a class="el" href="mymalloc_8h_source.html#l00025">ta_malloc</a>.</p>

<p class="reference">Referenced by <a class="el" href="metal__return_8c_source.html#l00517">metal_return()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="metal__return_8h_a2bc8aad8a4cd6b54c88ccd4321c6cfda_cgraph.svg" width="1442" height="443"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="metal__return_8h_a2bc8aad8a4cd6b54c88ccd4321c6cfda_icgraph.svg" width="494" height="38"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="a6bd8ed6c1f34beb2703996ba03572b8a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6bd8ed6c1f34beb2703996ba03572b8a">&#9670;&nbsp;</a></span>metal_return_priv_free()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void metal_return_priv_free </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structMetalReturnPriv.html">MetalReturnPriv</a> *&#160;</td>
          <td class="paramname"><em>priv</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="metal__return_8c_source.html#l00500">500</a> of file <a class="el" href="metal__return_8c_source.html">metal_return.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;{</div>
<div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;    <a class="code" href="mymalloc_8h.html#af469c2f7e504a771f5d8a91ac9623240">myfree</a>(priv-&gt;<a class="code" href="structMetalReturnPriv.html#a29789d7f689208055997dd8e0189704b">StarVolumeSPH</a>);</div>
<div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;    <a class="code" href="mymalloc_8h.html#af469c2f7e504a771f5d8a91ac9623240">myfree</a>(priv-&gt;<a class="code" href="structMetalReturnPriv.html#a31658498bcfbc005e067dd1d7e3efc87">HighDyingMass</a>);</div>
<div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;    <a class="code" href="mymalloc_8h.html#af469c2f7e504a771f5d8a91ac9623240">myfree</a>(priv-&gt;<a class="code" href="structMetalReturnPriv.html#afbeb5062024e1f55af3c675c2feb6c78">LowDyingMass</a>);</div>
<div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;    <a class="code" href="mymalloc_8h.html#af469c2f7e504a771f5d8a91ac9623240">myfree</a>(priv-&gt;<a class="code" href="structMetalReturnPriv.html#af3232cc5f66e274ab87edc401e1cac20">MassReturn</a>);</div>
<div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;    <a class="code" href="mymalloc_8h.html#af469c2f7e504a771f5d8a91ac9623240">myfree</a>(priv-&gt;<a class="code" href="structMetalReturnPriv.html#a4fc18b3395fd0b8c6c0c7a18ebbdf9c4">StellarAges</a>);</div>
<div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160; </div>
<div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;    <span class="keywordtype">int</span> i;</div>
<div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;    <span class="keywordflow">for</span>(i=0; i &lt; omp_get_max_threads(); i++)</div>
<div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;        gsl_integration_workspace_free(priv-&gt;<a class="code" href="structMetalReturnPriv.html#a1eed6c8d1077ff30b6e6855984159721">gsl_work</a>[i]);</div>
<div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160; </div>
<div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;    <a class="code" href="mymalloc_8h.html#a84e2115e90e9c22e11d9663c019fc8bc">ta_free</a>(priv-&gt;<a class="code" href="structMetalReturnPriv.html#a1eed6c8d1077ff30b6e6855984159721">gsl_work</a>);</div>
<div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;}</div>
<div class="ttc" id="amymalloc_8h_html_a84e2115e90e9c22e11d9663c019fc8bc"><div class="ttname"><a href="mymalloc_8h.html#a84e2115e90e9c22e11d9663c019fc8bc">ta_free</a></div><div class="ttdeci">#define ta_free(p)</div><div class="ttdef"><b>Definition:</b> <a href="mymalloc_8h_source.html#l00028">mymalloc.h:28</a></div></div>
<div class="ttc" id="amymalloc_8h_html_af469c2f7e504a771f5d8a91ac9623240"><div class="ttname"><a href="mymalloc_8h.html#af469c2f7e504a771f5d8a91ac9623240">myfree</a></div><div class="ttdeci">#define myfree(x)</div><div class="ttdef"><b>Definition:</b> <a href="mymalloc_8h_source.html#l00019">mymalloc.h:19</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="metal__return_8h_source.html#l00027">MetalReturnPriv::gsl_work</a>, <a class="el" href="metal__return_8h_source.html#l00031">MetalReturnPriv::HighDyingMass</a>, <a class="el" href="metal__return_8h_source.html#l00030">MetalReturnPriv::LowDyingMass</a>, <a class="el" href="metal__return_8h_source.html#l00029">MetalReturnPriv::MassReturn</a>, <a class="el" href="mymalloc_8h_source.html#l00019">myfree</a>, <a class="el" href="metal__return_8h_source.html#l00037">MetalReturnPriv::StarVolumeSPH</a>, <a class="el" href="metal__return_8h_source.html#l00028">MetalReturnPriv::StellarAges</a>, and <a class="el" href="mymalloc_8h_source.html#l00028">ta_free</a>.</p>

<p class="reference">Referenced by <a class="el" href="metal__return_8c_source.html#l00517">metal_return()</a>.</p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="metal__return_8h_a6bd8ed6c1f34beb2703996ba03572b8a_icgraph.svg" width="530" height="38"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="ab5c3a1fb77d5aef2936539c084bb0273"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab5c3a1fb77d5aef2936539c084bb0273">&#9670;&nbsp;</a></span>metals_haswork()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int metals_haswork </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>i</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="types_8h.html#af1ada7381a1118c6d51bdbb0b5e72811">MyFloat</a> *&#160;</td>
          <td class="paramname"><em>MassReturn</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="metal__return_8c_source.html#l00708">708</a> of file <a class="el" href="metal__return_8c_source.html">metal_return.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;{</div>
<div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;    <span class="keywordflow">if</span>(<a class="code" href="partmanager_8h.html#a2748566f4c443ee77aa831e63dbb5ebe">P</a>[i].Type != 4)</div>
<div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;    <span class="keywordtype">int</span> pi = <a class="code" href="partmanager_8h.html#a2748566f4c443ee77aa831e63dbb5ebe">P</a>[i].PI;</div>
<div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;    <span class="comment">/* Don&#39;t do enrichment from all stars, just those with significant enrichment*/</span></div>
<div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;    <span class="keywordflow">if</span>(MassReturn[pi] &lt; 1e-3 * (<a class="code" href="partmanager_8h.html#a2748566f4c443ee77aa831e63dbb5ebe">P</a>[i].Mass + <a class="code" href="slotsmanager_8h.html#a9dd255c01b21dd0eff9b32811421bfc8">STARP</a>(i).TotalMassReturned))</div>
<div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;    <span class="keywordflow">return</span> 1;</div>
<div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="metal__return_8h_source.html#l00029">MetalReturnPriv::MassReturn</a>, <a class="el" href="partmanager_8h_source.html#l00088">P</a>, and <a class="el" href="slotsmanager_8h_source.html#l00126">STARP</a>.</p>

<p class="reference">Referenced by <a class="el" href="metal__return_8c_source.html#l00720">metal_return_haswork()</a>, <a class="el" href="metal__return_8c_source.html#l00437">metal_return_init()</a>, and <a class="el" href="metal__return_8c_source.html#l00765">stellar_density_haswork()</a>.</p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="metal__return_8h_ab5c3a1fb77d5aef2936539c084bb0273_icgraph.svg" width="932" height="139"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="a867fc3e21ae7aa831a63f2f3f5f20f57"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a867fc3e21ae7aa831a63f2f3f5f20f57">&#9670;&nbsp;</a></span>set_metal_return_params()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void set_metal_return_params </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structParameterSet.html">ParameterSet</a> *&#160;</td>
          <td class="paramname"><em>ps</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="metal__return_8c_source.html#l00062">62</a> of file <a class="el" href="metal__return_8c_source.html">metal_return.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;{</div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="test__exchange_8c.html#a52c8c7d2abff436111942e02c5bb466a">ThisTask</a>;</div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;    MPI_Comm_rank(MPI_COMM_WORLD, &amp;<a class="code" href="test__exchange_8c.html#a52c8c7d2abff436111942e02c5bb466a">ThisTask</a>);</div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;    <span class="keywordflow">if</span>(<a class="code" href="test__exchange_8c.html#a52c8c7d2abff436111942e02c5bb466a">ThisTask</a> == 0) {</div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;        <a class="code" href="metal__return_8c.html#a687f879a7550bbdfdc820d65b606cb36">MetalParams</a>.<a class="code" href="structmetal__return__params.html#aab6341aebf537227479a3df11c2a1339">Sn1aN0</a> = <a class="code" href="paramset_8c.html#a1ae36a31d95a8e2a9d2812bb9ecc9d49">param_get_double</a>(ps, <span class="stringliteral">&quot;MetalsSn1aN0&quot;</span>);</div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;        <a class="code" href="metal__return_8c.html#a687f879a7550bbdfdc820d65b606cb36">MetalParams</a>.<a class="code" href="structmetal__return__params.html#a58452735fac8130955037b96e1c5c0ea">SPHWeighting</a> = <a class="code" href="paramset_8c.html#a6228c17649c46aef53e74cd7ccb93fb0">param_get_int</a>(ps, <span class="stringliteral">&quot;MetalsSPHWeighting&quot;</span>);</div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;        <a class="code" href="metal__return_8c.html#a687f879a7550bbdfdc820d65b606cb36">MetalParams</a>.<a class="code" href="structmetal__return__params.html#a98d41f7181e04a04139a160eaf7a0236">MaxNgbDeviation</a> = <a class="code" href="paramset_8c.html#a1ae36a31d95a8e2a9d2812bb9ecc9d49">param_get_double</a>(ps, <span class="stringliteral">&quot;MetalsMaxNgbDeviation&quot;</span>);</div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;    }</div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;    MPI_Bcast(&amp;<a class="code" href="metal__return_8c.html#a687f879a7550bbdfdc820d65b606cb36">MetalParams</a>, <span class="keyword">sizeof</span>(<span class="keyword">struct</span> <a class="code" href="structmetal__return__params.html">metal_return_params</a>), MPI_BYTE, 0, MPI_COMM_WORLD);</div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;}</div>
<div class="ttc" id="ametal__return_8c_html_a687f879a7550bbdfdc820d65b606cb36"><div class="ttname"><a href="metal__return_8c.html#a687f879a7550bbdfdc820d65b606cb36">MetalParams</a></div><div class="ttdeci">static struct metal_return_params MetalParams</div></div>
<div class="ttc" id="aparamset_8c_html_a1ae36a31d95a8e2a9d2812bb9ecc9d49"><div class="ttname"><a href="paramset_8c.html#a1ae36a31d95a8e2a9d2812bb9ecc9d49">param_get_double</a></div><div class="ttdeci">double param_get_double(ParameterSet *ps, const char *name)</div><div class="ttdef"><b>Definition:</b> <a href="paramset_8c_source.html#l00336">paramset.c:336</a></div></div>
<div class="ttc" id="aparamset_8c_html_a6228c17649c46aef53e74cd7ccb93fb0"><div class="ttname"><a href="paramset_8c.html#a6228c17649c46aef53e74cd7ccb93fb0">param_get_int</a></div><div class="ttdeci">int param_get_int(ParameterSet *ps, const char *name)</div><div class="ttdef"><b>Definition:</b> <a href="paramset_8c_source.html#l00368">paramset.c:368</a></div></div>
<div class="ttc" id="astructmetal__return__params_html"><div class="ttname"><a href="structmetal__return__params.html">metal_return_params</a></div><div class="ttdef"><b>Definition:</b> <a href="metal__return_8c_source.html#l00047">metal_return.c:48</a></div></div>
<div class="ttc" id="astructmetal__return__params_html_a58452735fac8130955037b96e1c5c0ea"><div class="ttname"><a href="structmetal__return__params.html#a58452735fac8130955037b96e1c5c0ea">metal_return_params::SPHWeighting</a></div><div class="ttdeci">int SPHWeighting</div><div class="ttdef"><b>Definition:</b> <a href="metal__return_8c_source.html#l00050">metal_return.c:50</a></div></div>
<div class="ttc" id="astructmetal__return__params_html_a98d41f7181e04a04139a160eaf7a0236"><div class="ttname"><a href="structmetal__return__params.html#a98d41f7181e04a04139a160eaf7a0236">metal_return_params::MaxNgbDeviation</a></div><div class="ttdeci">double MaxNgbDeviation</div><div class="ttdef"><b>Definition:</b> <a href="metal__return_8c_source.html#l00051">metal_return.c:51</a></div></div>
<div class="ttc" id="astructmetal__return__params_html_aab6341aebf537227479a3df11c2a1339"><div class="ttname"><a href="structmetal__return__params.html#aab6341aebf537227479a3df11c2a1339">metal_return_params::Sn1aN0</a></div><div class="ttdeci">double Sn1aN0</div><div class="ttdef"><b>Definition:</b> <a href="metal__return_8c_source.html#l00049">metal_return.c:49</a></div></div>
<div class="ttc" id="atest__exchange_8c_html_a52c8c7d2abff436111942e02c5bb466a"><div class="ttname"><a href="test__exchange_8c.html#a52c8c7d2abff436111942e02c5bb466a">ThisTask</a></div><div class="ttdeci">int ThisTask</div><div class="ttdef"><b>Definition:</b> <a href="test__exchange_8c_source.html#l00023">test_exchange.c:23</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="metal__return_8c_source.html#l00051">metal_return_params::MaxNgbDeviation</a>, <a class="el" href="metal__return_8c.html#a687f879a7550bbdfdc820d65b606cb36">MetalParams</a>, <a class="el" href="paramset_8c_source.html#l00336">param_get_double()</a>, <a class="el" href="paramset_8c_source.html#l00368">param_get_int()</a>, <a class="el" href="metal__return_8c_source.html#l00049">metal_return_params::Sn1aN0</a>, <a class="el" href="metal__return_8c_source.html#l00050">metal_return_params::SPHWeighting</a>, and <a class="el" href="test__exchange_8c_source.html#l00023">ThisTask</a>.</p>

<p class="reference">Referenced by <a class="el" href="gadget_2params_8c_source.html#l00359">read_parameter_file()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="metal__return_8h_a867fc3e21ae7aa831a63f2f3f5f20f57_cgraph.svg" width="858" height="130"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="metal__return_8h_a867fc3e21ae7aa831a63f2f3f5f20f57_icgraph.svg" width="504" height="38"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="a45c1e30e08ea1d55780815948138bdc6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a45c1e30e08ea1d55780815948138bdc6">&#9670;&nbsp;</a></span>setup_metal_table_interp()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void setup_metal_table_interp </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structinterps.html">interps</a> *&#160;</td>
          <td class="paramname"><em>interp</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="metal__return_8c_source.html#l00076">76</a> of file <a class="el" href="metal__return_8c_source.html">metal_return.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;{</div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;    <a class="code" href="cooling__uvfluc_8c.html#a7a1e78ce837328347579b1910844b59d">interp</a>-&gt;lifetime_interp = gsl_interp2d_alloc(gsl_interp2d_bilinear, <a class="code" href="metal__tables_8h.html#a009e5c702a99940896f57ca01379b6a1">LIFE_NMET</a>, <a class="code" href="metal__tables_8h.html#a6fd2c15826eef68647513456e6e50a3d">LIFE_NMASS</a>);</div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;    gsl_interp2d_init(<a class="code" href="cooling__uvfluc_8c.html#a7a1e78ce837328347579b1910844b59d">interp</a>-&gt;lifetime_interp, <a class="code" href="metal__tables_8h.html#aac3cc9648b91cf1489acba747f7c722d">lifetime_metallicity</a>, <a class="code" href="metal__tables_8h.html#ae29b0d26e01b69825f3d4bb0357170cd">lifetime_masses</a>, <a class="code" href="metal__tables_8h.html#ac626022f7ea397ad8b6309ab43229766">lifetime</a>, <a class="code" href="metal__tables_8h.html#a009e5c702a99940896f57ca01379b6a1">LIFE_NMET</a>, <a class="code" href="metal__tables_8h.html#a6fd2c15826eef68647513456e6e50a3d">LIFE_NMASS</a>);</div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;    <a class="code" href="cooling__uvfluc_8c.html#a7a1e78ce837328347579b1910844b59d">interp</a>-&gt;agb_mass_interp = gsl_interp2d_alloc(gsl_interp2d_bilinear, <a class="code" href="metal__tables_8h.html#a4f784d3142b1103442b95109d99f1dd8">AGB_NMET</a>, <a class="code" href="metal__tables_8h.html#a8f40898a35fecff6597e3f5b363426de">AGB_NMASS</a>);</div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;    gsl_interp2d_init(<a class="code" href="cooling__uvfluc_8c.html#a7a1e78ce837328347579b1910844b59d">interp</a>-&gt;agb_mass_interp, <a class="code" href="metal__tables_8h.html#affe9e55a7937d887e455b230d6debc72">agb_metallicities</a>, <a class="code" href="metal__tables_8h.html#a75fab227eb2c54a8c6a0dc8646b20586">agb_masses</a>, <a class="code" href="metal__tables_8h.html#a9805eef500ca9d27dbf530685e27ba61">agb_total_mass</a>, <a class="code" href="metal__tables_8h.html#a4f784d3142b1103442b95109d99f1dd8">AGB_NMET</a>, <a class="code" href="metal__tables_8h.html#a8f40898a35fecff6597e3f5b363426de">AGB_NMASS</a>);</div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;    <a class="code" href="cooling__uvfluc_8c.html#a7a1e78ce837328347579b1910844b59d">interp</a>-&gt;agb_metallicity_interp = gsl_interp2d_alloc(gsl_interp2d_bilinear, <a class="code" href="metal__tables_8h.html#a4f784d3142b1103442b95109d99f1dd8">AGB_NMET</a>, <a class="code" href="metal__tables_8h.html#a8f40898a35fecff6597e3f5b363426de">AGB_NMASS</a>);</div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;    gsl_interp2d_init(<a class="code" href="cooling__uvfluc_8c.html#a7a1e78ce837328347579b1910844b59d">interp</a>-&gt;agb_metallicity_interp, <a class="code" href="metal__tables_8h.html#affe9e55a7937d887e455b230d6debc72">agb_metallicities</a>, <a class="code" href="metal__tables_8h.html#a75fab227eb2c54a8c6a0dc8646b20586">agb_masses</a>, <a class="code" href="metal__tables_8h.html#aa38d6243b64cada879d9ecf59a02e527">agb_total_metals</a>, <a class="code" href="metal__tables_8h.html#a4f784d3142b1103442b95109d99f1dd8">AGB_NMET</a>, <a class="code" href="metal__tables_8h.html#a8f40898a35fecff6597e3f5b363426de">AGB_NMASS</a>);</div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;    <span class="keywordtype">int</span> i;</div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;    <span class="keywordflow">for</span>(i=0; i&lt;<a class="code" href="slotsmanager_8h.html#ad07d3b873121463218a991d53512e49b">NMETALS</a>; i++) {</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;        <a class="code" href="cooling__uvfluc_8c.html#a7a1e78ce837328347579b1910844b59d">interp</a>-&gt;agb_metals_interp[i] = gsl_interp2d_alloc(gsl_interp2d_bilinear, <a class="code" href="metal__tables_8h.html#a4f784d3142b1103442b95109d99f1dd8">AGB_NMET</a>, <a class="code" href="metal__tables_8h.html#a8f40898a35fecff6597e3f5b363426de">AGB_NMASS</a>);</div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;        gsl_interp2d_init(<a class="code" href="cooling__uvfluc_8c.html#a7a1e78ce837328347579b1910844b59d">interp</a>-&gt;agb_metals_interp[i], <a class="code" href="metal__tables_8h.html#affe9e55a7937d887e455b230d6debc72">agb_metallicities</a>, <a class="code" href="metal__tables_8h.html#a75fab227eb2c54a8c6a0dc8646b20586">agb_masses</a>, <a class="code" href="metal__tables_8h.html#ada35087703fd56a884bc7c79c2b26495">agb_yield</a>[i], <a class="code" href="metal__tables_8h.html#a4f784d3142b1103442b95109d99f1dd8">AGB_NMET</a>, <a class="code" href="metal__tables_8h.html#a8f40898a35fecff6597e3f5b363426de">AGB_NMASS</a>);</div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;    }</div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;    <a class="code" href="cooling__uvfluc_8c.html#a7a1e78ce837328347579b1910844b59d">interp</a>-&gt;snii_mass_interp = gsl_interp2d_alloc(gsl_interp2d_bilinear, <a class="code" href="metal__tables_8h.html#ab4b5721a1b3263ad6360bf5b874f7102">SNII_NMET</a>, <a class="code" href="metal__tables_8h.html#a72c6dc54510c0490ccc48ca6d1b6d5a3">SNII_NMASS</a>);</div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;    gsl_interp2d_init(<a class="code" href="cooling__uvfluc_8c.html#a7a1e78ce837328347579b1910844b59d">interp</a>-&gt;snii_mass_interp, <a class="code" href="metal__tables_8h.html#a61be6fb4a1f463c29c9c1f436ac02ae6">snii_metallicities</a>, <a class="code" href="metal__tables_8h.html#ae1387e9c35b052580b69af49c33068dd">snii_masses</a>, <a class="code" href="metal__tables_8h.html#a94a003b7846207e7810e1e55b0244e42">snii_total_mass</a>, <a class="code" href="metal__tables_8h.html#ab4b5721a1b3263ad6360bf5b874f7102">SNII_NMET</a>, <a class="code" href="metal__tables_8h.html#a72c6dc54510c0490ccc48ca6d1b6d5a3">SNII_NMASS</a>);</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;    <a class="code" href="cooling__uvfluc_8c.html#a7a1e78ce837328347579b1910844b59d">interp</a>-&gt;snii_metallicity_interp = gsl_interp2d_alloc(gsl_interp2d_bilinear, <a class="code" href="metal__tables_8h.html#ab4b5721a1b3263ad6360bf5b874f7102">SNII_NMET</a>, <a class="code" href="metal__tables_8h.html#a72c6dc54510c0490ccc48ca6d1b6d5a3">SNII_NMASS</a>);</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;    gsl_interp2d_init(<a class="code" href="cooling__uvfluc_8c.html#a7a1e78ce837328347579b1910844b59d">interp</a>-&gt;snii_metallicity_interp, <a class="code" href="metal__tables_8h.html#a61be6fb4a1f463c29c9c1f436ac02ae6">snii_metallicities</a>, <a class="code" href="metal__tables_8h.html#ae1387e9c35b052580b69af49c33068dd">snii_masses</a>, <a class="code" href="metal__tables_8h.html#afa712d91edf737c0da969b49f4b9837f">snii_total_metals</a>, <a class="code" href="metal__tables_8h.html#ab4b5721a1b3263ad6360bf5b874f7102">SNII_NMET</a>, <a class="code" href="metal__tables_8h.html#a72c6dc54510c0490ccc48ca6d1b6d5a3">SNII_NMASS</a>);</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;    <span class="keywordflow">for</span>(i=0; i&lt;<a class="code" href="slotsmanager_8h.html#ad07d3b873121463218a991d53512e49b">NMETALS</a>; i++) {</div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;        <a class="code" href="cooling__uvfluc_8c.html#a7a1e78ce837328347579b1910844b59d">interp</a>-&gt;snii_metals_interp[i] = gsl_interp2d_alloc(gsl_interp2d_bilinear, <a class="code" href="metal__tables_8h.html#ab4b5721a1b3263ad6360bf5b874f7102">SNII_NMET</a>, <a class="code" href="metal__tables_8h.html#a72c6dc54510c0490ccc48ca6d1b6d5a3">SNII_NMASS</a>);</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;        gsl_interp2d_init(<a class="code" href="cooling__uvfluc_8c.html#a7a1e78ce837328347579b1910844b59d">interp</a>-&gt;snii_metals_interp[i], <a class="code" href="metal__tables_8h.html#a61be6fb4a1f463c29c9c1f436ac02ae6">snii_metallicities</a>, <a class="code" href="metal__tables_8h.html#ae1387e9c35b052580b69af49c33068dd">snii_masses</a>, <a class="code" href="metal__tables_8h.html#a17de36caa644e3741822c6196dbbcd9d">snii_yield</a>[i], <a class="code" href="metal__tables_8h.html#ab4b5721a1b3263ad6360bf5b874f7102">SNII_NMET</a>, <a class="code" href="metal__tables_8h.html#a72c6dc54510c0490ccc48ca6d1b6d5a3">SNII_NMASS</a>);</div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;    }</div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;}</div>
<div class="ttc" id="acooling__uvfluc_8c_html_a7a1e78ce837328347579b1910844b59d"><div class="ttname"><a href="cooling__uvfluc_8c.html#a7a1e78ce837328347579b1910844b59d">interp</a></div><div class="ttdeci">Interp interp</div><div class="ttdef"><b>Definition:</b> <a href="cooling__uvfluc_8c_source.html#l00019">cooling_uvfluc.c:19</a></div></div>
<div class="ttc" id="ametal__tables_8h_html_a009e5c702a99940896f57ca01379b6a1"><div class="ttname"><a href="metal__tables_8h.html#a009e5c702a99940896f57ca01379b6a1">LIFE_NMET</a></div><div class="ttdeci">#define LIFE_NMET</div><div class="ttdef"><b>Definition:</b> <a href="metal__tables_8h_source.html#l00016">metal_tables.h:16</a></div></div>
<div class="ttc" id="ametal__tables_8h_html_a17de36caa644e3741822c6196dbbcd9d"><div class="ttname"><a href="metal__tables_8h.html#a17de36caa644e3741822c6196dbbcd9d">snii_yield</a></div><div class="ttdeci">static const double snii_yield[NSPECIES][SNII_NMET *SNII_NMASS]</div><div class="ttdef"><b>Definition:</b> <a href="metal__tables_8h_source.html#l00334">metal_tables.h:334</a></div></div>
<div class="ttc" id="ametal__tables_8h_html_a4f784d3142b1103442b95109d99f1dd8"><div class="ttname"><a href="metal__tables_8h.html#a4f784d3142b1103442b95109d99f1dd8">AGB_NMET</a></div><div class="ttdeci">#define AGB_NMET</div><div class="ttdef"><b>Definition:</b> <a href="metal__tables_8h_source.html#l00068">metal_tables.h:68</a></div></div>
<div class="ttc" id="ametal__tables_8h_html_a6fd2c15826eef68647513456e6e50a3d"><div class="ttname"><a href="metal__tables_8h.html#a6fd2c15826eef68647513456e6e50a3d">LIFE_NMASS</a></div><div class="ttdeci">#define LIFE_NMASS</div><div class="ttdef"><b>Definition:</b> <a href="metal__tables_8h_source.html#l00017">metal_tables.h:17</a></div></div>
<div class="ttc" id="ametal__tables_8h_html_a72c6dc54510c0490ccc48ca6d1b6d5a3"><div class="ttname"><a href="metal__tables_8h.html#a72c6dc54510c0490ccc48ca6d1b6d5a3">SNII_NMASS</a></div><div class="ttdeci">#define SNII_NMASS</div><div class="ttdef"><b>Definition:</b> <a href="metal__tables_8h_source.html#l00309">metal_tables.h:309</a></div></div>
<div class="ttc" id="ametal__tables_8h_html_a8f40898a35fecff6597e3f5b363426de"><div class="ttname"><a href="metal__tables_8h.html#a8f40898a35fecff6597e3f5b363426de">AGB_NMASS</a></div><div class="ttdeci">#define AGB_NMASS</div><div class="ttdef"><b>Definition:</b> <a href="metal__tables_8h_source.html#l00069">metal_tables.h:69</a></div></div>
<div class="ttc" id="ametal__tables_8h_html_a94a003b7846207e7810e1e55b0244e42"><div class="ttname"><a href="metal__tables_8h.html#a94a003b7846207e7810e1e55b0244e42">snii_total_mass</a></div><div class="ttdeci">static const double snii_total_mass[SNII_NMET *SNII_NMASS]</div><div class="ttdef"><b>Definition:</b> <a href="metal__tables_8h_source.html#l00312">metal_tables.h:312</a></div></div>
<div class="ttc" id="ametal__tables_8h_html_a9805eef500ca9d27dbf530685e27ba61"><div class="ttname"><a href="metal__tables_8h.html#a9805eef500ca9d27dbf530685e27ba61">agb_total_mass</a></div><div class="ttdeci">static const double agb_total_mass[AGB_NMET *AGB_NMASS]</div><div class="ttdef"><b>Definition:</b> <a href="metal__tables_8h_source.html#l00072">metal_tables.h:72</a></div></div>
<div class="ttc" id="ametal__tables_8h_html_aa38d6243b64cada879d9ecf59a02e527"><div class="ttname"><a href="metal__tables_8h.html#aa38d6243b64cada879d9ecf59a02e527">agb_total_metals</a></div><div class="ttdeci">static const double agb_total_metals[AGB_NMET *AGB_NMASS]</div><div class="ttdef"><b>Definition:</b> <a href="metal__tables_8h_source.html#l00094">metal_tables.h:94</a></div></div>
<div class="ttc" id="ametal__tables_8h_html_aac3cc9648b91cf1489acba747f7c722d"><div class="ttname"><a href="metal__tables_8h.html#aac3cc9648b91cf1489acba747f7c722d">lifetime_metallicity</a></div><div class="ttdeci">static const double lifetime_metallicity[LIFE_NMET]</div><div class="ttdef"><b>Definition:</b> <a href="metal__tables_8h_source.html#l00018">metal_tables.h:18</a></div></div>
<div class="ttc" id="ametal__tables_8h_html_ac626022f7ea397ad8b6309ab43229766"><div class="ttname"><a href="metal__tables_8h.html#ac626022f7ea397ad8b6309ab43229766">lifetime</a></div><div class="ttdeci">static const double lifetime[LIFE_NMASS *LIFE_NMET]</div><div class="ttdef"><b>Definition:</b> <a href="metal__tables_8h_source.html#l00024">metal_tables.h:24</a></div></div>
<div class="ttc" id="ametal__tables_8h_html_ada35087703fd56a884bc7c79c2b26495"><div class="ttname"><a href="metal__tables_8h.html#ada35087703fd56a884bc7c79c2b26495">agb_yield</a></div><div class="ttdeci">static const double agb_yield[NSPECIES][AGB_NMET *AGB_NMASS]</div><div class="ttdef"><b>Definition:</b> <a href="metal__tables_8h_source.html#l00116">metal_tables.h:116</a></div></div>
<div class="ttc" id="ametal__tables_8h_html_ae1387e9c35b052580b69af49c33068dd"><div class="ttname"><a href="metal__tables_8h.html#ae1387e9c35b052580b69af49c33068dd">snii_masses</a></div><div class="ttdeci">static const double snii_masses[SNII_NMASS]</div><div class="ttdef"><b>Definition:</b> <a href="metal__tables_8h_source.html#l00310">metal_tables.h:310</a></div></div>
<div class="ttc" id="ametal__tables_8h_html_ae29b0d26e01b69825f3d4bb0357170cd"><div class="ttname"><a href="metal__tables_8h.html#ae29b0d26e01b69825f3d4bb0357170cd">lifetime_masses</a></div><div class="ttdeci">static const double lifetime_masses[LIFE_NMASS]</div><div class="ttdef"><b>Definition:</b> <a href="metal__tables_8h_source.html#l00020">metal_tables.h:20</a></div></div>
<div class="ttc" id="ametal__tables_8h_html_afa712d91edf737c0da969b49f4b9837f"><div class="ttname"><a href="metal__tables_8h.html#afa712d91edf737c0da969b49f4b9837f">snii_total_metals</a></div><div class="ttdeci">static const double snii_total_metals[SNII_NMET *SNII_NMASS]</div><div class="ttdef"><b>Definition:</b> <a href="metal__tables_8h_source.html#l00323">metal_tables.h:323</a></div></div>
<div class="ttc" id="ametal__tables_8h_html_affe9e55a7937d887e455b230d6debc72"><div class="ttname"><a href="metal__tables_8h.html#affe9e55a7937d887e455b230d6debc72">agb_metallicities</a></div><div class="ttdeci">static const double agb_metallicities[AGB_NMET]</div><div class="ttdef"><b>Definition:</b> <a href="metal__tables_8h_source.html#l00071">metal_tables.h:71</a></div></div>
<div class="ttc" id="aslotsmanager_8h_html_ad07d3b873121463218a991d53512e49b"><div class="ttname"><a href="slotsmanager_8h.html#ad07d3b873121463218a991d53512e49b">NMETALS</a></div><div class="ttdeci">#define NMETALS</div><div class="ttdef"><b>Definition:</b> <a href="slotsmanager_8h_source.html#l00060">slotsmanager.h:60</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="metal__tables_8h_source.html#l00070">agb_masses</a>, <a class="el" href="metal__tables_8h_source.html#l00071">agb_metallicities</a>, <a class="el" href="metal__tables_8h_source.html#l00069">AGB_NMASS</a>, <a class="el" href="metal__tables_8h_source.html#l00068">AGB_NMET</a>, <a class="el" href="metal__tables_8h_source.html#l00072">agb_total_mass</a>, <a class="el" href="metal__tables_8h_source.html#l00094">agb_total_metals</a>, <a class="el" href="metal__tables_8h_source.html#l00116">agb_yield</a>, <a class="el" href="cooling__uvfluc_8c_source.html#l00019">interp</a>, <a class="el" href="metal__tables_8h_source.html#l00017">LIFE_NMASS</a>, <a class="el" href="metal__tables_8h_source.html#l00016">LIFE_NMET</a>, <a class="el" href="metal__tables_8h_source.html#l00024">lifetime</a>, <a class="el" href="metal__tables_8h_source.html#l00020">lifetime_masses</a>, <a class="el" href="metal__tables_8h_source.html#l00018">lifetime_metallicity</a>, <a class="el" href="slotsmanager_8h_source.html#l00060">NMETALS</a>, <a class="el" href="metal__tables_8h_source.html#l00310">snii_masses</a>, <a class="el" href="metal__tables_8h_source.html#l00311">snii_metallicities</a>, <a class="el" href="metal__tables_8h_source.html#l00309">SNII_NMASS</a>, <a class="el" href="metal__tables_8h_source.html#l00308">SNII_NMET</a>, <a class="el" href="metal__tables_8h_source.html#l00312">snii_total_mass</a>, <a class="el" href="metal__tables_8h_source.html#l00323">snii_total_metals</a>, and <a class="el" href="metal__tables_8h_source.html#l00334">snii_yield</a>.</p>

<p class="reference">Referenced by <a class="el" href="metal__return_8c_source.html#l00437">metal_return_init()</a>, and <a class="el" href="test__metal__return_8c_source.html#l00020">test_yields()</a>.</p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="metal__return_8h_a45c1e30e08ea1d55780815948138bdc6_icgraph.svg" width="730" height="88"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="ac6208618c0ad5ad55e84bcfb213e7dcb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac6208618c0ad5ad55e84bcfb213e7dcb">&#9670;&nbsp;</a></span>stellar_density()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void stellar_density </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structActiveParticles.html">ActiveParticles</a> *&#160;</td>
          <td class="paramname"><em>act</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="types_8h.html#af1ada7381a1118c6d51bdbb0b5e72811">MyFloat</a> *&#160;</td>
          <td class="paramname"><em>StarVolumeSPH</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="types_8h.html#af1ada7381a1118c6d51bdbb0b5e72811">MyFloat</a> *&#160;</td>
          <td class="paramname"><em>MassReturn</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structForceTree.html">ForceTree</a> *const&#160;</td>
          <td class="paramname"><em>tree</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="metal__return_8c_source.html#l00923">923</a> of file <a class="el" href="metal__return_8c_source.html">metal_return.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00924"></a><span class="lineno">  924</span>&#160;{</div>
<div class="line"><a name="l00925"></a><span class="lineno">  925</span>&#160;    <a class="code" href="structTreeWalk.html">TreeWalk</a> tw[1] = {{0}};</div>
<div class="line"><a name="l00926"></a><span class="lineno">  926</span>&#160;    <span class="keyword">struct </span><a class="code" href="structStellarDensityPriv.html">StellarDensityPriv</a> priv[1];</div>
<div class="line"><a name="l00927"></a><span class="lineno">  927</span>&#160; </div>
<div class="line"><a name="l00928"></a><span class="lineno">  928</span>&#160;    tw-&gt;<a class="code" href="structTreeWalk.html#aa3ff3d4a5a82422609ac154aa4a461ea">ev_label</a> = <span class="stringliteral">&quot;STELLAR_DENSITY&quot;</span>;</div>
<div class="line"><a name="l00929"></a><span class="lineno">  929</span>&#160;    tw-&gt;<a class="code" href="structTreeWalk.html#ab4e96e67f2e72ac33dca9dd06cdac6c0">visit</a> = <a class="code" href="treewalk_8c.html#a1878fddf49185074fd570a46f3eea372">treewalk_visit_nolist_ngbiter</a>;</div>
<div class="line"><a name="l00930"></a><span class="lineno">  930</span>&#160;    tw-&gt;<a class="code" href="structTreeWalk.html#aafe4f27abb67d3959e711ef6787c9b75">NoNgblist</a> = 1;</div>
<div class="line"><a name="l00931"></a><span class="lineno">  931</span>&#160;    tw-&gt;<a class="code" href="structTreeWalk.html#a36bf2eb0e0d65ace233ef30335e04659">ngbiter_type_elsize</a> = <span class="keyword">sizeof</span>(<a class="code" href="structTreeWalkNgbIterStellarDensity.html">TreeWalkNgbIterStellarDensity</a>);</div>
<div class="line"><a name="l00932"></a><span class="lineno">  932</span>&#160;    tw-&gt;<a class="code" href="structTreeWalk.html#a96381f9f61cf2c56dac48927cd997ec3">ngbiter</a> = (<a class="code" href="treewalk_8h.html#aade20e4cc34b64ecf3bd6f5525465371">TreeWalkNgbIterFunction</a>) <a class="code" href="metal__return_8c.html#a65644be78b16f3de65301143dd8d18be">stellar_density_ngbiter</a>;</div>
<div class="line"><a name="l00933"></a><span class="lineno">  933</span>&#160;    tw-&gt;<a class="code" href="structTreeWalk.html#a2f6bc842f407a44d99de52e9b5140454">haswork</a> = <a class="code" href="metal__return_8c.html#a5142fdac0ab32dc3c63608bf785c7bcf">stellar_density_haswork</a>;</div>
<div class="line"><a name="l00934"></a><span class="lineno">  934</span>&#160;    tw-&gt;<a class="code" href="structTreeWalk.html#ad0b91dafd46de132917e7993869514c5">fill</a> = (<a class="code" href="treewalk_8h.html#ac9a8ade7817c58b83859399364deb1a1">TreeWalkFillQueryFunction</a>) <a class="code" href="metal__return_8c.html#a9af02ff3c8c0ce8dade6b5710fcc9dee">stellar_density_copy</a>;</div>
<div class="line"><a name="l00935"></a><span class="lineno">  935</span>&#160;    tw-&gt;<a class="code" href="structTreeWalk.html#aa08a0586a68d1f4f87e0caa1e59dcc5e">reduce</a> = (<a class="code" href="treewalk_8h.html#a2b5a07b25001ac6e9e628d4eb0493b8c">TreeWalkReduceResultFunction</a>) <a class="code" href="metal__return_8c.html#a1a46a94f15fef845c32f0bfe21e66ce3">stellar_density_reduce</a>;</div>
<div class="line"><a name="l00936"></a><span class="lineno">  936</span>&#160;    tw-&gt;<a class="code" href="structTreeWalk.html#a8c4dcda60d680c3d56423fca8647472f">postprocess</a> = (<a class="code" href="treewalk_8h.html#a80f59f147efe7c27b601024d819769db">TreeWalkProcessFunction</a>) <a class="code" href="metal__return_8c.html#a17b72849def018c74b52c243280021be">stellar_density_check_neighbours</a>;</div>
<div class="line"><a name="l00937"></a><span class="lineno">  937</span>&#160;    tw-&gt;<a class="code" href="structTreeWalk.html#affd5eae4b5a63dcce236ac15b00b4c7c">query_type_elsize</a> = <span class="keyword">sizeof</span>(<a class="code" href="structTreeWalkQueryStellarDensity.html">TreeWalkQueryStellarDensity</a>);</div>
<div class="line"><a name="l00938"></a><span class="lineno">  938</span>&#160;    tw-&gt;<a class="code" href="structTreeWalk.html#ac8c67faaf2c360ed510c4508f11f7c2d">result_type_elsize</a> = <span class="keyword">sizeof</span>(<a class="code" href="structTreeWalkResultStellarDensity.html">TreeWalkResultStellarDensity</a>);</div>
<div class="line"><a name="l00939"></a><span class="lineno">  939</span>&#160;    tw-&gt;<a class="code" href="structTreeWalk.html#a2ae51082ebb6332e558024b6a45506b2">priv</a> = priv;</div>
<div class="line"><a name="l00940"></a><span class="lineno">  940</span>&#160;    tw-&gt;<a class="code" href="structTreeWalk.html#a8525705e365e7c07027f372b66aff149">tree</a> = tree;</div>
<div class="line"><a name="l00941"></a><span class="lineno">  941</span>&#160; </div>
<div class="line"><a name="l00942"></a><span class="lineno">  942</span>&#160;    <span class="keywordtype">int</span> i;</div>
<div class="line"><a name="l00943"></a><span class="lineno">  943</span>&#160; </div>
<div class="line"><a name="l00944"></a><span class="lineno">  944</span>&#160;    priv-&gt;MassReturn = <a class="code" href="structStellarDensityPriv.html#a8404dbc104ce789a069dd7b4e7316e59">MassReturn</a>;</div>
<div class="line"><a name="l00945"></a><span class="lineno">  945</span>&#160; </div>
<div class="line"><a name="l00946"></a><span class="lineno">  946</span>&#160;    priv-&gt;Left = (<a class="code" href="types_8h.html#af1ada7381a1118c6d51bdbb0b5e72811">MyFloat</a> *) <a class="code" href="mymalloc_8h.html#a3eb707b32b6ac69f2df085e4bc098cc4">mymalloc</a>(<span class="stringliteral">&quot;DENS_PRIV-&gt;Left&quot;</span>, <a class="code" href="slotsmanager_8c.html#aa317621b6c60bc95c5f3e33c648e8392">SlotsManager</a>-&gt;<a class="code" href="structslots__manager__type.html#a2b662d46902bf6fffca8b3fa2534a4e4">info</a>[4].<a class="code" href="structslot__info.html#aa651c4c7d01687a0b313076c0266465f">size</a> * <span class="keyword">sizeof</span>(<a class="code" href="types_8h.html#af1ada7381a1118c6d51bdbb0b5e72811">MyFloat</a>));</div>
<div class="line"><a name="l00947"></a><span class="lineno">  947</span>&#160;    priv-&gt;Right = (<a class="code" href="types_8h.html#af1ada7381a1118c6d51bdbb0b5e72811">MyFloat</a> *) <a class="code" href="mymalloc_8h.html#a3eb707b32b6ac69f2df085e4bc098cc4">mymalloc</a>(<span class="stringliteral">&quot;DENS_PRIV-&gt;Right&quot;</span>, <a class="code" href="slotsmanager_8c.html#aa317621b6c60bc95c5f3e33c648e8392">SlotsManager</a>-&gt;<a class="code" href="structslots__manager__type.html#a2b662d46902bf6fffca8b3fa2534a4e4">info</a>[4].<a class="code" href="structslot__info.html#aa651c4c7d01687a0b313076c0266465f">size</a> * <span class="keyword">sizeof</span>(<a class="code" href="types_8h.html#af1ada7381a1118c6d51bdbb0b5e72811">MyFloat</a>));</div>
<div class="line"><a name="l00948"></a><span class="lineno">  948</span>&#160;    priv-&gt;NumNgb = (<a class="code" href="types_8h.html#af1ada7381a1118c6d51bdbb0b5e72811">MyFloat</a> (*) [<a class="code" href="metal__return_8c.html#a3f020f76e26ad070cd0d2d9dca12c47f">NHSML</a>]) <a class="code" href="mymalloc_8h.html#a3eb707b32b6ac69f2df085e4bc098cc4">mymalloc</a>(<span class="stringliteral">&quot;DENS_PRIV-&gt;NumNgb&quot;</span>, <a class="code" href="slotsmanager_8c.html#aa317621b6c60bc95c5f3e33c648e8392">SlotsManager</a>-&gt;<a class="code" href="structslots__manager__type.html#a2b662d46902bf6fffca8b3fa2534a4e4">info</a>[4].<a class="code" href="structslot__info.html#aa651c4c7d01687a0b313076c0266465f">size</a> * <span class="keyword">sizeof</span>(priv-&gt;NumNgb[0]));</div>
<div class="line"><a name="l00949"></a><span class="lineno">  949</span>&#160;    priv-&gt;VolumeSPH = (<a class="code" href="types_8h.html#af1ada7381a1118c6d51bdbb0b5e72811">MyFloat</a> (*) [<a class="code" href="metal__return_8c.html#a3f020f76e26ad070cd0d2d9dca12c47f">NHSML</a>]) <a class="code" href="mymalloc_8h.html#a3eb707b32b6ac69f2df085e4bc098cc4">mymalloc</a>(<span class="stringliteral">&quot;DENS_PRIV-&gt;VolumeSPH&quot;</span>, <a class="code" href="slotsmanager_8c.html#aa317621b6c60bc95c5f3e33c648e8392">SlotsManager</a>-&gt;<a class="code" href="structslots__manager__type.html#a2b662d46902bf6fffca8b3fa2534a4e4">info</a>[4].<a class="code" href="structslot__info.html#aa651c4c7d01687a0b313076c0266465f">size</a> * <span class="keyword">sizeof</span>(priv-&gt;VolumeSPH[0]));</div>
<div class="line"><a name="l00950"></a><span class="lineno">  950</span>&#160;    priv-&gt;maxcmpte = (<span class="keywordtype">int</span> *) <a class="code" href="mymalloc_8h.html#a3eb707b32b6ac69f2df085e4bc098cc4">mymalloc</a>(<span class="stringliteral">&quot;maxcmpte&quot;</span>, <a class="code" href="slotsmanager_8c.html#aa317621b6c60bc95c5f3e33c648e8392">SlotsManager</a>-&gt;<a class="code" href="structslots__manager__type.html#a2b662d46902bf6fffca8b3fa2534a4e4">info</a>[4].<a class="code" href="structslot__info.html#aa651c4c7d01687a0b313076c0266465f">size</a> * <span class="keyword">sizeof</span>(<span class="keywordtype">int</span>));</div>
<div class="line"><a name="l00951"></a><span class="lineno">  951</span>&#160; </div>
<div class="line"><a name="l00952"></a><span class="lineno">  952</span>&#160;    priv-&gt;DesNumNgb = <a class="code" href="density_8c.html#a23e510a287a10de773a4a0f14db2ff52">GetNumNgb</a>(<a class="code" href="density_8c.html#ac40e53af730ce9956d564e3dc18d6f0e">GetDensityKernelType</a>());</div>
<div class="line"><a name="l00953"></a><span class="lineno">  953</span>&#160; </div>
<div class="line"><a name="l00954"></a><span class="lineno">  954</span>&#160;<span class="preprocessor">    #pragma omp parallel for</span></div>
<div class="line"><a name="l00955"></a><span class="lineno">  955</span>&#160;    <span class="keywordflow">for</span>(i = 0; i &lt; act-&gt;<a class="code" href="structActiveParticles.html#a847ab898fdabc62a4723c7c3a66038d4">NumActiveParticle</a>; i++) {</div>
<div class="line"><a name="l00956"></a><span class="lineno">  956</span>&#160;        <span class="keywordtype">int</span> a = act-&gt;<a class="code" href="structActiveParticles.html#a1b0b230f3890d70bae976516719b7d07">ActiveParticle</a> ? act-&gt;<a class="code" href="structActiveParticles.html#a1b0b230f3890d70bae976516719b7d07">ActiveParticle</a>[i] : i;</div>
<div class="line"><a name="l00957"></a><span class="lineno">  957</span>&#160;        <span class="comment">/* Skip the garbage particles */</span></div>
<div class="line"><a name="l00958"></a><span class="lineno">  958</span>&#160;        <span class="keywordflow">if</span>(<a class="code" href="partmanager_8h.html#a2748566f4c443ee77aa831e63dbb5ebe">P</a>[a].IsGarbage)</div>
<div class="line"><a name="l00959"></a><span class="lineno">  959</span>&#160;            <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00960"></a><span class="lineno">  960</span>&#160;        <span class="keywordflow">if</span>(!<a class="code" href="metal__return_8c.html#a5142fdac0ab32dc3c63608bf785c7bcf">stellar_density_haswork</a>(a, tw))</div>
<div class="line"><a name="l00961"></a><span class="lineno">  961</span>&#160;            <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00962"></a><span class="lineno">  962</span>&#160;        <span class="keywordtype">int</span> pi = <a class="code" href="partmanager_8h.html#a2748566f4c443ee77aa831e63dbb5ebe">P</a>[a].PI;</div>
<div class="line"><a name="l00963"></a><span class="lineno">  963</span>&#160;        priv-&gt;Left[pi] = 0;</div>
<div class="line"><a name="l00964"></a><span class="lineno">  964</span>&#160;        priv-&gt;Right[pi] = tree-&gt;<a class="code" href="structForceTree.html#a8915a4ff849c9e97448ae30089a05966">BoxSize</a>;</div>
<div class="line"><a name="l00965"></a><span class="lineno">  965</span>&#160;    }</div>
<div class="line"><a name="l00966"></a><span class="lineno">  966</span>&#160; </div>
<div class="line"><a name="l00967"></a><span class="lineno">  967</span>&#160;    <span class="comment">/* allocate buffers to arrange communication */</span></div>
<div class="line"><a name="l00968"></a><span class="lineno">  968</span>&#160; </div>
<div class="line"><a name="l00969"></a><span class="lineno">  969</span>&#160;    <a class="code" href="treewalk_8c.html#a72643adf5c7952933b8f5fbb27d45a97">treewalk_do_hsml_loop</a>(tw, act-&gt;<a class="code" href="structActiveParticles.html#a1b0b230f3890d70bae976516719b7d07">ActiveParticle</a>, act-&gt;<a class="code" href="structActiveParticles.html#a847ab898fdabc62a4723c7c3a66038d4">NumActiveParticle</a>, 1);</div>
<div class="line"><a name="l00970"></a><span class="lineno">  970</span>&#160;<span class="preprocessor">    #pragma omp parallel for</span></div>
<div class="line"><a name="l00971"></a><span class="lineno">  971</span>&#160;    <span class="keywordflow">for</span>(i = 0; i &lt; act-&gt;<a class="code" href="structActiveParticles.html#a847ab898fdabc62a4723c7c3a66038d4">NumActiveParticle</a>; i++) {</div>
<div class="line"><a name="l00972"></a><span class="lineno">  972</span>&#160;        <span class="keywordtype">int</span> a = act-&gt;<a class="code" href="structActiveParticles.html#a1b0b230f3890d70bae976516719b7d07">ActiveParticle</a> ? act-&gt;<a class="code" href="structActiveParticles.html#a1b0b230f3890d70bae976516719b7d07">ActiveParticle</a>[i] : i;</div>
<div class="line"><a name="l00973"></a><span class="lineno">  973</span>&#160;        <span class="comment">/* Skip the garbage particles */</span></div>
<div class="line"><a name="l00974"></a><span class="lineno">  974</span>&#160;        <span class="keywordflow">if</span>(<a class="code" href="partmanager_8h.html#a2748566f4c443ee77aa831e63dbb5ebe">P</a>[a].IsGarbage)</div>
<div class="line"><a name="l00975"></a><span class="lineno">  975</span>&#160;            <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00976"></a><span class="lineno">  976</span>&#160;        <span class="keywordflow">if</span>(!<a class="code" href="metal__return_8c.html#a5142fdac0ab32dc3c63608bf785c7bcf">stellar_density_haswork</a>(a, tw))</div>
<div class="line"><a name="l00977"></a><span class="lineno">  977</span>&#160;            <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00978"></a><span class="lineno">  978</span>&#160;        <span class="comment">/* Copy the Star Volume SPH*/</span></div>
<div class="line"><a name="l00979"></a><span class="lineno">  979</span>&#160;        StarVolumeSPH[<a class="code" href="partmanager_8h.html#a2748566f4c443ee77aa831e63dbb5ebe">P</a>[a].PI] = priv-&gt;VolumeSPH[<a class="code" href="partmanager_8h.html#a2748566f4c443ee77aa831e63dbb5ebe">P</a>[a].PI][0];</div>
<div class="line"><a name="l00980"></a><span class="lineno">  980</span>&#160;        <span class="keywordflow">if</span>(priv-&gt;VolumeSPH[<a class="code" href="partmanager_8h.html#a2748566f4c443ee77aa831e63dbb5ebe">P</a>[a].PI][0] == 0)</div>
<div class="line"><a name="l00981"></a><span class="lineno">  981</span>&#160;            <a class="code" href="endrun_8c.html#ad963d7efdb9f10f7a2298c8ccd222ab0">endrun</a>(3, <span class="stringliteral">&quot;i = %d pi = %d StarVolumeSPH %g hsml %g\n&quot;</span>, a, <a class="code" href="partmanager_8h.html#a2748566f4c443ee77aa831e63dbb5ebe">P</a>[a].PI, priv-&gt;VolumeSPH[<a class="code" href="partmanager_8h.html#a2748566f4c443ee77aa831e63dbb5ebe">P</a>[a].PI][0], <a class="code" href="partmanager_8h.html#a2748566f4c443ee77aa831e63dbb5ebe">P</a>[a].Hsml);</div>
<div class="line"><a name="l00982"></a><span class="lineno">  982</span>&#160;    }</div>
<div class="line"><a name="l00983"></a><span class="lineno">  983</span>&#160; </div>
<div class="line"><a name="l00984"></a><span class="lineno">  984</span>&#160;    <a class="code" href="mymalloc_8h.html#af469c2f7e504a771f5d8a91ac9623240">myfree</a>(priv-&gt;maxcmpte);</div>
<div class="line"><a name="l00985"></a><span class="lineno">  985</span>&#160;    <a class="code" href="mymalloc_8h.html#af469c2f7e504a771f5d8a91ac9623240">myfree</a>(priv-&gt;VolumeSPH);</div>
<div class="line"><a name="l00986"></a><span class="lineno">  986</span>&#160;    <a class="code" href="mymalloc_8h.html#af469c2f7e504a771f5d8a91ac9623240">myfree</a>(priv-&gt;NumNgb);</div>
<div class="line"><a name="l00987"></a><span class="lineno">  987</span>&#160;    <a class="code" href="mymalloc_8h.html#af469c2f7e504a771f5d8a91ac9623240">myfree</a>(priv-&gt;Right);</div>
<div class="line"><a name="l00988"></a><span class="lineno">  988</span>&#160;    <a class="code" href="mymalloc_8h.html#af469c2f7e504a771f5d8a91ac9623240">myfree</a>(priv-&gt;Left);</div>
<div class="line"><a name="l00989"></a><span class="lineno">  989</span>&#160; </div>
<div class="line"><a name="l00990"></a><span class="lineno">  990</span>&#160;    <span class="keywordtype">double</span> timeall = <a class="code" href="walltime_8h.html#a2d23071e44d020b4a0b3f2876667d370">walltime_measure</a>(<a class="code" href="walltime_8h.html#a5cedff8706bf3a249bd5e3c365b67964">WALLTIME_IGNORE</a>);</div>
<div class="line"><a name="l00991"></a><span class="lineno">  991</span>&#160; </div>
<div class="line"><a name="l00992"></a><span class="lineno">  992</span>&#160;    <span class="keywordtype">double</span> timecomp = tw-&gt;<a class="code" href="structTreeWalk.html#a714d0465e0498a5a8d0b698d37348ce6">timecomp3</a> + tw-&gt;<a class="code" href="structTreeWalk.html#ada69256fab1ba3b0e5ff0f837f749b2e">timecomp1</a> + tw-&gt;<a class="code" href="structTreeWalk.html#a6518c361d396be49a9d1c676d8769802">timecomp2</a>;</div>
<div class="line"><a name="l00993"></a><span class="lineno">  993</span>&#160;    <span class="keywordtype">double</span> timewait = tw-&gt;<a class="code" href="structTreeWalk.html#ae62aa594cbe693d40de9334cc0f7c820">timewait1</a> + tw-&gt;<a class="code" href="structTreeWalk.html#aacf67d9ea224563ae4006114d97e473c">timewait2</a>;</div>
<div class="line"><a name="l00994"></a><span class="lineno">  994</span>&#160;    <span class="keywordtype">double</span> timecomm = tw-&gt;<a class="code" href="structTreeWalk.html#a80f3ba2d463ce192ccb0f42eed264f56">timecommsumm1</a> + tw-&gt;<a class="code" href="structTreeWalk.html#ae663d6653b464f02c95c57ae4a5bdd3a">timecommsumm2</a>;</div>
<div class="line"><a name="l00995"></a><span class="lineno">  995</span>&#160;    <a class="code" href="walltime_8h.html#a9266fc830d2aac1ad7d6e5322be6f489">walltime_add</a>(<span class="stringliteral">&quot;/SPH/Metals/Density/Compute&quot;</span>, timecomp);</div>
<div class="line"><a name="l00996"></a><span class="lineno">  996</span>&#160;    <a class="code" href="walltime_8h.html#a9266fc830d2aac1ad7d6e5322be6f489">walltime_add</a>(<span class="stringliteral">&quot;/SPH/Metals/Density/Wait&quot;</span>, timewait);</div>
<div class="line"><a name="l00997"></a><span class="lineno">  997</span>&#160;    <a class="code" href="walltime_8h.html#a9266fc830d2aac1ad7d6e5322be6f489">walltime_add</a>(<span class="stringliteral">&quot;/SPH/Metals/Density/Comm&quot;</span>, timecomm);</div>
<div class="line"><a name="l00998"></a><span class="lineno">  998</span>&#160;    <a class="code" href="walltime_8h.html#a9266fc830d2aac1ad7d6e5322be6f489">walltime_add</a>(<span class="stringliteral">&quot;/SPH/Metals/Density/Misc&quot;</span>, timeall - (timecomp + timewait + timecomm));</div>
<div class="line"><a name="l00999"></a><span class="lineno">  999</span>&#160; </div>
<div class="line"><a name="l01000"></a><span class="lineno"> 1000</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01001"></a><span class="lineno"> 1001</span>&#160;}</div>
<div class="ttc" id="adensity_8c_html_a23e510a287a10de773a4a0f14db2ff52"><div class="ttname"><a href="density_8c.html#a23e510a287a10de773a4a0f14db2ff52">GetNumNgb</a></div><div class="ttdeci">double GetNumNgb(enum DensityKernelType KernelType)</div><div class="ttdef"><b>Definition:</b> <a href="density_8c_source.html#l00055">density.c:55</a></div></div>
<div class="ttc" id="adensity_8c_html_ac40e53af730ce9956d564e3dc18d6f0e"><div class="ttname"><a href="density_8c.html#ac40e53af730ce9956d564e3dc18d6f0e">GetDensityKernelType</a></div><div class="ttdeci">enum DensityKernelType GetDensityKernelType(void)</div><div class="ttdef"><b>Definition:</b> <a href="density_8c_source.html#l00055">density.c:63</a></div></div>
<div class="ttc" id="aendrun_8c_html_ad963d7efdb9f10f7a2298c8ccd222ab0"><div class="ttname"><a href="endrun_8c.html#ad963d7efdb9f10f7a2298c8ccd222ab0">endrun</a></div><div class="ttdeci">void endrun(int where, const char *fmt,...)</div><div class="ttdef"><b>Definition:</b> <a href="endrun_8c_source.html#l00147">endrun.c:147</a></div></div>
<div class="ttc" id="ametal__return_8c_html_a17b72849def018c74b52c243280021be"><div class="ttname"><a href="metal__return_8c.html#a17b72849def018c74b52c243280021be">stellar_density_check_neighbours</a></div><div class="ttdeci">void stellar_density_check_neighbours(int i, TreeWalk *tw)</div><div class="ttdef"><b>Definition:</b> <a href="metal__return_8c_source.html#l00820">metal_return.c:820</a></div></div>
<div class="ttc" id="ametal__return_8c_html_a1a46a94f15fef845c32f0bfe21e66ce3"><div class="ttname"><a href="metal__return_8c.html#a1a46a94f15fef845c32f0bfe21e66ce3">stellar_density_reduce</a></div><div class="ttdeci">static void stellar_density_reduce(int place, TreeWalkResultStellarDensity *remote, enum TreeWalkReduceMode mode, TreeWalk *tw)</div><div class="ttdef"><b>Definition:</b> <a href="metal__return_8c_source.html#l00808">metal_return.c:808</a></div></div>
<div class="ttc" id="ametal__return_8c_html_a3f020f76e26ad070cd0d2d9dca12c47f"><div class="ttname"><a href="metal__return_8c.html#a3f020f76e26ad070cd0d2d9dca12c47f">NHSML</a></div><div class="ttdeci">#define NHSML</div><div class="ttdef"><b>Definition:</b> <a href="metal__return_8c_source.html#l00726">metal_return.c:726</a></div></div>
<div class="ttc" id="ametal__return_8c_html_a5142fdac0ab32dc3c63608bf785c7bcf"><div class="ttname"><a href="metal__return_8c.html#a5142fdac0ab32dc3c63608bf785c7bcf">stellar_density_haswork</a></div><div class="ttdeci">static int stellar_density_haswork(int i, TreeWalk *tw)</div><div class="ttdef"><b>Definition:</b> <a href="metal__return_8c_source.html#l00765">metal_return.c:765</a></div></div>
<div class="ttc" id="ametal__return_8c_html_a65644be78b16f3de65301143dd8d18be"><div class="ttname"><a href="metal__return_8c.html#a65644be78b16f3de65301143dd8d18be">stellar_density_ngbiter</a></div><div class="ttdeci">static void stellar_density_ngbiter(TreeWalkQueryStellarDensity *I, TreeWalkResultStellarDensity *O, TreeWalkNgbIterStellarDensity *iter, LocalTreeWalk *lv)</div><div class="ttdef"><b>Definition:</b> <a href="metal__return_8c_source.html#l00872">metal_return.c:872</a></div></div>
<div class="ttc" id="ametal__return_8c_html_a9af02ff3c8c0ce8dade6b5710fcc9dee"><div class="ttname"><a href="metal__return_8c.html#a9af02ff3c8c0ce8dade6b5710fcc9dee">stellar_density_copy</a></div><div class="ttdeci">static void stellar_density_copy(int place, TreeWalkQueryStellarDensity *I, TreeWalk *tw)</div><div class="ttdef"><b>Definition:</b> <a href="metal__return_8c_source.html#l00800">metal_return.c:800</a></div></div>
<div class="ttc" id="astructForceTree_html_a8915a4ff849c9e97448ae30089a05966"><div class="ttname"><a href="structForceTree.html#a8915a4ff849c9e97448ae30089a05966">ForceTree::BoxSize</a></div><div class="ttdeci">double BoxSize</div><div class="ttdef"><b>Definition:</b> <a href="forcetree_8h_source.html#l00106">forcetree.h:106</a></div></div>
<div class="ttc" id="astructStellarDensityPriv_html"><div class="ttname"><a href="structStellarDensityPriv.html">StellarDensityPriv</a></div><div class="ttdef"><b>Definition:</b> <a href="metal__return_8c_source.html#l00748">metal_return.c:748</a></div></div>
<div class="ttc" id="astructStellarDensityPriv_html_a8404dbc104ce789a069dd7b4e7316e59"><div class="ttname"><a href="structStellarDensityPriv.html#a8404dbc104ce789a069dd7b4e7316e59">StellarDensityPriv::MassReturn</a></div><div class="ttdeci">MyFloat * MassReturn</div><div class="ttdef"><b>Definition:</b> <a href="metal__return_8c_source.html#l00755">metal_return.c:755</a></div></div>
<div class="ttc" id="astructTreeWalkNgbIterStellarDensity_html"><div class="ttname"><a href="structTreeWalkNgbIterStellarDensity.html">TreeWalkNgbIterStellarDensity</a></div><div class="ttdef"><b>Definition:</b> <a href="metal__return_8c_source.html#l00728">metal_return.c:728</a></div></div>
<div class="ttc" id="astructTreeWalkQueryStellarDensity_html"><div class="ttname"><a href="structTreeWalkQueryStellarDensity.html">TreeWalkQueryStellarDensity</a></div><div class="ttdef"><b>Definition:</b> <a href="metal__return_8c_source.html#l00734">metal_return.c:735</a></div></div>
<div class="ttc" id="astructTreeWalkResultStellarDensity_html"><div class="ttname"><a href="structTreeWalkResultStellarDensity.html">TreeWalkResultStellarDensity</a></div><div class="ttdef"><b>Definition:</b> <a href="metal__return_8c_source.html#l00740">metal_return.c:740</a></div></div>
<div class="ttc" id="astructTreeWalk_html_a6518c361d396be49a9d1c676d8769802"><div class="ttname"><a href="structTreeWalk.html#a6518c361d396be49a9d1c676d8769802">TreeWalk::timecomp2</a></div><div class="ttdeci">double timecomp2</div><div class="ttdef"><b>Definition:</b> <a href="treewalk_8h_source.html#l00124">treewalk.h:124</a></div></div>
<div class="ttc" id="astructTreeWalk_html_a714d0465e0498a5a8d0b698d37348ce6"><div class="ttname"><a href="structTreeWalk.html#a714d0465e0498a5a8d0b698d37348ce6">TreeWalk::timecomp3</a></div><div class="ttdeci">double timecomp3</div><div class="ttdef"><b>Definition:</b> <a href="treewalk_8h_source.html#l00125">treewalk.h:125</a></div></div>
<div class="ttc" id="astructTreeWalk_html_a80f3ba2d463ce192ccb0f42eed264f56"><div class="ttname"><a href="structTreeWalk.html#a80f3ba2d463ce192ccb0f42eed264f56">TreeWalk::timecommsumm1</a></div><div class="ttdeci">double timecommsumm1</div><div class="ttdef"><b>Definition:</b> <a href="treewalk_8h_source.html#l00126">treewalk.h:126</a></div></div>
<div class="ttc" id="astructTreeWalk_html_aacf67d9ea224563ae4006114d97e473c"><div class="ttname"><a href="structTreeWalk.html#aacf67d9ea224563ae4006114d97e473c">TreeWalk::timewait2</a></div><div class="ttdeci">double timewait2</div><div class="ttdef"><b>Definition:</b> <a href="treewalk_8h_source.html#l00122">treewalk.h:122</a></div></div>
<div class="ttc" id="astructTreeWalk_html_aafe4f27abb67d3959e711ef6787c9b75"><div class="ttname"><a href="structTreeWalk.html#aafe4f27abb67d3959e711ef6787c9b75">TreeWalk::NoNgblist</a></div><div class="ttdeci">int NoNgblist</div><div class="ttdef"><b>Definition:</b> <a href="treewalk_8h_source.html#l00156">treewalk.h:156</a></div></div>
<div class="ttc" id="astructTreeWalk_html_ada69256fab1ba3b0e5ff0f837f749b2e"><div class="ttname"><a href="structTreeWalk.html#ada69256fab1ba3b0e5ff0f837f749b2e">TreeWalk::timecomp1</a></div><div class="ttdeci">double timecomp1</div><div class="ttdef"><b>Definition:</b> <a href="treewalk_8h_source.html#l00123">treewalk.h:123</a></div></div>
<div class="ttc" id="astructTreeWalk_html_ae62aa594cbe693d40de9334cc0f7c820"><div class="ttname"><a href="structTreeWalk.html#ae62aa594cbe693d40de9334cc0f7c820">TreeWalk::timewait1</a></div><div class="ttdeci">double timewait1</div><div class="ttdef"><b>Definition:</b> <a href="treewalk_8h_source.html#l00121">treewalk.h:121</a></div></div>
<div class="ttc" id="astructTreeWalk_html_ae663d6653b464f02c95c57ae4a5bdd3a"><div class="ttname"><a href="structTreeWalk.html#ae663d6653b464f02c95c57ae4a5bdd3a">TreeWalk::timecommsumm2</a></div><div class="ttdeci">double timecommsumm2</div><div class="ttdef"><b>Definition:</b> <a href="treewalk_8h_source.html#l00127">treewalk.h:127</a></div></div>
<div class="ttc" id="atreewalk_8c_html_a1878fddf49185074fd570a46f3eea372"><div class="ttname"><a href="treewalk_8c.html#a1878fddf49185074fd570a46f3eea372">treewalk_visit_nolist_ngbiter</a></div><div class="ttdeci">int treewalk_visit_nolist_ngbiter(TreeWalkQueryBase *I, TreeWalkResultBase *O, LocalTreeWalk *lv)</div><div class="ttdef"><b>Definition:</b> <a href="treewalk_8c_source.html#l01143">treewalk.c:1143</a></div></div>
<div class="ttc" id="atreewalk_8c_html_a72643adf5c7952933b8f5fbb27d45a97"><div class="ttname"><a href="treewalk_8c.html#a72643adf5c7952933b8f5fbb27d45a97">treewalk_do_hsml_loop</a></div><div class="ttdeci">void treewalk_do_hsml_loop(TreeWalk *tw, int *queue, int64_t queuesize, int update_hsml)</div><div class="ttdef"><b>Definition:</b> <a href="treewalk_8c_source.html#l01254">treewalk.c:1254</a></div></div>
<div class="ttc" id="atreewalk_8h_html_a2b5a07b25001ac6e9e628d4eb0493b8c"><div class="ttname"><a href="treewalk_8h.html#a2b5a07b25001ac6e9e628d4eb0493b8c">TreeWalkReduceResultFunction</a></div><div class="ttdeci">void(* TreeWalkReduceResultFunction)(const int j, TreeWalkResultBase *result, const enum TreeWalkReduceMode mode, TreeWalk *tw)</div><div class="ttdef"><b>Definition:</b> <a href="treewalk_8h_source.html#l00076">treewalk.h:76</a></div></div>
<div class="ttc" id="awalltime_8h_html_a5cedff8706bf3a249bd5e3c365b67964"><div class="ttname"><a href="walltime_8h.html#a5cedff8706bf3a249bd5e3c365b67964">WALLTIME_IGNORE</a></div><div class="ttdeci">#define WALLTIME_IGNORE</div><div class="ttdef"><b>Definition:</b> <a href="walltime_8h_source.html#l00006">walltime.h:6</a></div></div>
<div class="ttc" id="awalltime_8h_html_a9266fc830d2aac1ad7d6e5322be6f489"><div class="ttname"><a href="walltime_8h.html#a9266fc830d2aac1ad7d6e5322be6f489">walltime_add</a></div><div class="ttdeci">#define walltime_add(name, dt)</div><div class="ttdef"><b>Definition:</b> <a href="walltime_8h_source.html#l00009">walltime.h:9</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="timestep_8h_source.html#l00013">ActiveParticles::ActiveParticle</a>, <a class="el" href="forcetree_8h_source.html#l00106">ForceTree::BoxSize</a>, <a class="el" href="metal__return_8c_source.html#l00757">StellarDensityPriv::DesNumNgb</a>, <a class="el" href="endrun_8c_source.html#l00147">endrun()</a>, <a class="el" href="treewalk_8h_source.html#l00091">TreeWalk::ev_label</a>, <a class="el" href="treewalk_8h_source.html#l00101">TreeWalk::fill</a>, <a class="el" href="density_8c_source.html#l00063">GetDensityKernelType()</a>, <a class="el" href="density_8c_source.html#l00055">GetNumNgb()</a>, <a class="el" href="treewalk_8h_source.html#l00100">TreeWalk::haswork</a>, <a class="el" href="slotsmanager_8h_source.html#l00112">slots_manager_type::info</a>, <a class="el" href="metal__return_8c_source.html#l00752">StellarDensityPriv::Left</a>, <a class="el" href="metal__return_8c_source.html#l00755">StellarDensityPriv::MassReturn</a>, <a class="el" href="metal__return_8c_source.html#l00759">StellarDensityPriv::maxcmpte</a>, <a class="el" href="mymalloc_8h_source.html#l00019">myfree</a>, <a class="el" href="mymalloc_8h_source.html#l00015">mymalloc</a>, <a class="el" href="treewalk_8h_source.html#l00103">TreeWalk::ngbiter</a>, <a class="el" href="treewalk_8h_source.html#l00097">TreeWalk::ngbiter_type_elsize</a>, <a class="el" href="metal__return_8c_source.html#l00726">NHSML</a>, <a class="el" href="treewalk_8h_source.html#l00156">TreeWalk::NoNgblist</a>, <a class="el" href="timestep_8h_source.html#l00012">ActiveParticles::NumActiveParticle</a>, <a class="el" href="metal__return_8c_source.html#l00750">StellarDensityPriv::NumNgb</a>, <a class="el" href="partmanager_8h_source.html#l00088">P</a>, <a class="el" href="treewalk_8h_source.html#l00104">TreeWalk::postprocess</a>, <a class="el" href="treewalk_8h_source.html#l00085">TreeWalk::priv</a>, <a class="el" href="treewalk_8h_source.html#l00095">TreeWalk::query_type_elsize</a>, <a class="el" href="treewalk_8h_source.html#l00102">TreeWalk::reduce</a>, <a class="el" href="treewalk_8h_source.html#l00096">TreeWalk::result_type_elsize</a>, <a class="el" href="metal__return_8c_source.html#l00752">StellarDensityPriv::Right</a>, <a class="el" href="slotsmanager_8h_source.html#l00012">slot_info::size</a>, <a class="el" href="slotsmanager_8c_source.html#l00007">SlotsManager</a>, <a class="el" href="metal__return_8c_source.html#l00820">stellar_density_check_neighbours()</a>, <a class="el" href="metal__return_8c_source.html#l00800">stellar_density_copy()</a>, <a class="el" href="metal__return_8c_source.html#l00765">stellar_density_haswork()</a>, <a class="el" href="metal__return_8c_source.html#l00872">stellar_density_ngbiter()</a>, <a class="el" href="metal__return_8c_source.html#l00808">stellar_density_reduce()</a>, <a class="el" href="treewalk_8h_source.html#l00126">TreeWalk::timecommsumm1</a>, <a class="el" href="treewalk_8h_source.html#l00127">TreeWalk::timecommsumm2</a>, <a class="el" href="treewalk_8h_source.html#l00123">TreeWalk::timecomp1</a>, <a class="el" href="treewalk_8h_source.html#l00124">TreeWalk::timecomp2</a>, <a class="el" href="treewalk_8h_source.html#l00125">TreeWalk::timecomp3</a>, <a class="el" href="treewalk_8h_source.html#l00121">TreeWalk::timewait1</a>, <a class="el" href="treewalk_8h_source.html#l00122">TreeWalk::timewait2</a>, <a class="el" href="treewalk_8h_source.html#l00088">TreeWalk::tree</a>, <a class="el" href="treewalk_8c_source.html#l01254">treewalk_do_hsml_loop()</a>, <a class="el" href="treewalk_8c_source.html#l01143">treewalk_visit_nolist_ngbiter()</a>, <a class="el" href="treewalk_8h_source.html#l00099">TreeWalk::visit</a>, <a class="el" href="metal__return_8c_source.html#l00753">StellarDensityPriv::VolumeSPH</a>, <a class="el" href="walltime_8h_source.html#l00009">walltime_add</a>, <a class="el" href="walltime_8h_source.html#l00006">WALLTIME_IGNORE</a>, and <a class="el" href="walltime_8h_source.html#l00008">walltime_measure</a>.</p>

<p class="reference">Referenced by <a class="el" href="metal__return_8c_source.html#l00517">metal_return()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="metal__return_8h_ac6208618c0ad5ad55e84bcfb213e7dcb_cgraph.svg" width="1726" height="1599"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="metal__return_8h_ac6208618c0ad5ad55e84bcfb213e7dcb_icgraph.svg" width="478" height="38"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>
